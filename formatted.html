<!doctype html><html lang="en"><head>  <meta charset="utf-8">  <title>Ѭ</title><link href="style.css" rel="stylesheet"/></head><body>

<div class="image"><img class="screenshot" src="screenshot.png"></img>
</div>

<div class="bookmark">./readme.txt</div><pre class=notes>
This page is meant to display code in an aesthetic way. 

Each language has its own color scheme, and features syntax hilighting.
The color scheme is controlled by the css, 
and the syntax hilighting is done via a python parser program that puts in html tags. 
With this program I can quickly generate new pages out of any code that I have. 

The full code for this page is shown below, some parts of it may be a little messy,
but overall, it works. There is also code for the terminal interface to this page, 
which is a very good example of spaghetti code!

Slowly read the code and try to see what it does on the actual webpage you're on.
Sorry if it's complicated! If you find any mistakes in the code please let me know!
</pre>
<div class="bookmark">./terminal.html</div><pre class=html>
<kw>&lt!DOCTYPE HTML&gt</kw>

<kw>&lthtml&gt</kw>
	<kw>&lthead&gt</kw>
		<kw>&ltmeta charset="UTF-8"&gt</kw>   
		<kw>&lttitle&gt</kw>Mobius Terminal<kw>&lt/title&gt</kw>
		<kw>&ltstyle&gt</kw>
			
			body { 	
				background-color: #000; 
				cursor: crosshair;
				overflow: hidden;
			}

			canvas {
				border-style: solid;
				border-color:	#369;
				border-width: 2px;
				display: block;
				margin: auto;
				padding-left: 0;
				padding-right: 0;
				cursor: none;
			}

		<kw>&lt/style&gt</kw>

	<kw>&lt/head&gt</kw>
	<kw>&ltbody&gt</kw>
		<kw>&ltcanvas id = "terminal"&gt</kw><kw>&lt/canvas&gt</kw>
		<kw>&ltscript src="terminal.js"&gt</kw><kw>&lt/script&gt</kw>
	<kw>&lt/body&gt</kw>
<kw>&lt/html&gt</kw>
</pre>
<div class="bookmark">./visual.html</div><pre class=html>
<kw>&lt!DOCTYPE html&gt</kw>
<kw>&lthtml lang="en"&gt</kw>
	<kw>&ltmeta charset="UTF-8"&gt</kw>
	<kw>&lttitle&gt</kw>Archive<kw>&lt/title&gt</kw>
	<kw>&ltmeta name="viewport" 
		content="width=device-width,initial-scale=1"&gt</kw>
	<kw>&ltmeta http-equiv="author"
		  content="Boris Volkov" /&gt</kw>
	

	<kw>&ltlink rel="stylesheet" 
		href="style.css"&gt</kw>

	<kw>&ltbody&gt</kw>
		<kw>&ltdiv class="top_menu"&gt</kw>
			<kw>&lta href="#web" class="first"&gt</kw>
				web
			<kw>&lt/a&gt</kw>
			<kw>&lta href="#exe"&gt</kw>
				exe
			<kw>&lt/a&gt</kw>
			<kw>&lta href="#code"&gt</kw>
				code
			<kw>&lt/a&gt</kw>
			<kw>&lta href="#text" class="last"&gt</kw>
				txt
			<kw>&lt/a&gt</kw>
		<kw>&lt/div&gt</kw>

		<kw>&ltwedge id="web"&gt</kw>h<kw>&lt/wedge&gt</kw>
		<kw>&ltdiv class="bookmark"&gt</kw>
			web_tutorials
		<kw>&lt/div&gt</kw>

		<kw>&ltdiv class="image_box"&gt</kw>	
			<kw>&lta href="./web/basic/formatted.html"/&gt</kw>
					<kw>&ltimg src="./web/basic/screenshot.png"&gt</kw>
					<kw>&ltp&gt</kw>to_begin_with<kw>&lt/p&gt</kw>
			<kw>&lt/a&gt</kw>
			<kw>&lta href="./web/divs/formatted.html"/&gt</kw>
					<kw>&ltimg src="./web/divs/screenshot.png"&gt</kw>
					<kw>&ltp&gt</kw>flexboxes<kw>&lt/p&gt</kw>
			<kw>&lt/a&gt</kw>
			<kw>&lta href="./formatted.html"/&gt</kw>
					<kw>&ltimg src="./screenshot.png"&gt</kw>
					<kw>&ltp&gt</kw>this<kw>&lt/p&gt</kw>
			<kw>&lt/a&gt</kw>
			<kw>&lta href="./web/button/formatted.html"/&gt</kw>
					<kw>&ltimg src="./web/button/screenshot.png"&gt</kw>
					<kw>&ltp&gt</kw>button<kw>&lt/p&gt</kw>
			<kw>&lt/a&gt</kw>
			<kw>&lta href="./web/sizing/formatted.html"/&gt</kw>
					<kw>&ltimg src="./web/sizing/screenshot.png"&gt</kw>
					<kw>&ltp&gt</kw>sizing<kw>&lt/p&gt</kw>
			<kw>&lt/a&gt</kw>
		<kw>&lt/div&gt</kw>


		<kw>&ltwedge id="exe"&gt</kw>h<kw>&lt/wedge&gt</kw>
		<kw>&ltdiv class="bookmark"&gt</kw>
			executables
		<kw>&lt/div&gt</kw>
		<kw>&ltdiv class="link_box"&gt</kw>
			<kw>&lta href="./terminal.html"&gt</kw>mobius_terminal<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/quest/formatted.html"&gt</kw>calculator_quest<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/game/formatted.html"&gt</kw>2d_engine<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/fifteen/formatted.html"&gt</kw>fifteen_puzzle<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/sixteen/formatted.html"&gt</kw>sixteen_puzzle<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/princess/formatted.html"&gt</kw>the_princess's_test<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/territory/formatted.html"&gt</kw>territories<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/graphics/formatted.html"&gt</kw>color_picker<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/lines/formatted.html"&gt</kw>drawing_drills<kw>&lt/a&gt</kw>
			<kw>&lta href="./exe/speed_typer/formatted.html"&gt</kw>speed_typer<kw>&lt/a&gt</kw>
		<kw>&lt/div&gt</kw>

		<kw>&ltwedge id="code"&gt</kw>h<kw>&lt/wedge&gt</kw>
		<kw>&ltdiv class="bookmark"&gt</kw>
			code
		<kw>&lt/div&gt</kw>
		<kw>&ltdiv class="link_box"&gt</kw>
			<kw>&lta href="./code/multiplication/formatted.html"&gt</kw>math_drills<kw>&lt/a&gt</kw>
			<kw>&lta href="./code/chaos/formatted.html"&gt</kw>chaos_graph<kw>&lt/a&gt</kw>
			<kw>&lta href="./code/stocks/formatted.html"&gt</kw>stock_trader_sim<kw>&lt/a&gt</kw>
			<kw>&lta href="./code/twenty_four/formatted.html"&gt</kw>24_solver<kw>&lt/a&gt</kw>
			<kw>&lta href="./code/colors/formatted.html"&gt</kw>color_printing_in_python<kw>&lt/a&gt</kw>
			<kw>&lta href="./code/js_audio/formatted.html"&gt</kw>audio_in_javascript<kw>&lt/a&gt</kw>
			<kw>&lta href="./pre_terminal/formatted.html"&gt</kw>i/o_terminal_in_javascript<kw>&lt/a&gt</kw>
			<kw>&lta href="./code/turtles/formatted.html"&gt</kw>turtles<kw>&lt/a&gt</kw>



		<kw>&lt/div&gt</kw>

		<kw>&ltwedge id="text"&gt</kw>h<kw>&lt/wedge&gt</kw>
		<kw>&ltdiv class="bookmark"&gt</kw>
			text
		<kw>&lt/div&gt</kw>
		<kw>&ltdiv class="link_box"&gt</kw>
			<kw>&lta href="./txt/tools/formatted.html"&gt</kw>where_to_write_code<kw>&lt/a&gt</kw>
		<kw>&lt/div&gt</kw>
		<kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw>
		<kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw>
		<kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw>
		<kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw><kw>&lt/br&gt</kw>
	<kw>&lt/body&gt</kw>
<kw>&lt/html&gt</kw> 
</pre>
<div class="bookmark">./style.css</div><pre class=css>
<sc>* {</sc>
<css>	color: coral;</css>
<css>	font-family : Courier;</css>
<css>	font-weight : 600;</css>
<css>	box-sizing : border-box; <comment class="css">/* to correct sizes */</comment></css>
<sc>}</sc>
<css></css>
<sc>body {</sc>
<css>	background-color : #333942;</css>
<css>	background: linear-gradient(180deg, rgb(21,27,36), rgb(51,57,66))</css>
<sc>}</sc>
<css></css>
<sc>pre {</sc>
<css>	line-height : 1.5em;</css>
<css>	letter-spacing : 2px;</css>
<css>	white-space: pre-wrap;  <comment class="css">/* to wrap text */</comment></css>
<css>	word-break: break-all;	<comment class="css">/* so words don't get broken in wrap */</comment></css>
<css>	cursor: text;</css>
<sc>}</sc>
<css></css>
<sc>div, pre {</sc>  				<comment class="css">/* centering, margins, rounding */</comment>
<css>	margin: auto;</css>
<css>	padding: 10px;</css>
<css>	padding-left: 40px;</css>
<css>	width: 90vw;   			<comment class="css">/* 90% of viewport width */</comment></css>
<css>	border-radius: 16px;</css>
<css>	border-top-left-radius: 40px;</css>
<css>	tab-size: 4;			<comment class="css">/* otherwise its 8 spaces*/</comment></css>
<css>	-moz-tab-size: 4;</css>
<sc>}</sc>
<css></css>
<sc>div {</sc>
<css>	padding: 30px;</css>
<sc>}</sc>
<css></css>
<sc>div.image {</sc>
<css>	background-color : #011;</css>
<css>	display: flex;			<comment class="css">/* to be able to center it */</comment></css>
<css>	justify-content : center;</css>
<css>	align-items: center;	</css>
<sc>}</sc>
<css></css>
<sc>a {</sc>
<css>	text-decoration: none;</css>
<css>	cursor: default;</css>
<sc>}</sc>
<css></css>
<sc>.terminal_button {</sc>
<css>	margin-top : 50px!important;</css>
<css>	display: flex;</css>
<css>	flex-direction : column;</css>
<css>	margin: auto;</css>
<css>	height: 5vw;</css>
<css>	width: 5vw;</css>
<css>	padding: 0;</css>
<css>	text-align:center;</css>
<css>	border-radius : 50%;</css>
<css>	border-bottom-right-radius:0;</css>
<css>	border-bottom-left-radius:0;</css>
<css>	background-color: #445;</css>
<sc>}</sc>
<css></css>
<sc>.terminal_button a {</sc>
<css>	background-color: coral;</css>
<css>	padding: 0;</css>
<css>	display: block;</css>
<css>	margin: auto;</css>
<css>	height :3vw;</css>
<css>	width : 3vw;</css>
<css>	border-radius: 50%;</css>
<sc>}</sc>
<css></css>
<sc>.terminal_button a:hover {</sc>
<css>	background-color: #358;</css>
<sc>}</sc>
<css></css>
<sc>.terminal_button .inner_button {</sc>
<css>	display: inline;</css>
<css>	vertical-align : middle;</css>
<css>	padding: 0;</css>
<css>	margin: 0;</css>
<sc>}</sc>
<css></css>
<sc>.top_menu {</sc>
<css>	background-color: #445;</css>
<css>	opacity : 0.9;</css>
<css>	position : sticky; 		<comment class="css">/* stick to top of screen */</comment></css>
<css>	top : 0;</css>
<css>	width : 95vw;</css>
<css>	border-radius:10px;</css>
<css>	padding: 0;</css>
<css>	margin: auto;</css>
<css>	display: flex;</css>
<css>	flex-wrap: wrap-reverse;</css>
<css>	align-content : stretch;</css>
<css>	border-bottom-left-radius: 30px;</css>
<css>	border-bottom-right-radius: 30px;</css>
<sc>}</sc>
<css></css>
<sc>.top_menu a {</sc>
<css>	text-align : center;</css>
<css>	background-color: #445;</css>
<css>	flex : 1;</css>
<css>	color: coral;</css>
<css>	text-decoration: none;</css>
<css>	padding: 15px 20px;</css>
<sc>}</sc>
<css></css>
<sc>.top_menu a.first {</sc>
<css>	border-bottom-left-radius: 30px;</css>
<sc>}</sc>
<css></css>
<sc>.top_menu a.last {</sc>
<css>	border-bottom-right-radius: 30px;</css>
<sc>}</sc>
<css></css>
<sc>.top_menu a:hover {</sc>
<css>	background: #358;</css>
<sc>}</sc>
<css></css>
<css></css>
<sc>.screenshot {</sc>
<css>	max-height: 50vh;</css>
<css>	max-width: 85vw;</css>
<css>	object-fit: contain;</css>
<sc>}</sc>
<css></css>
<sc>div.bookmark {</sc> 				<comment class="css">/* the little tab above all the boxes */</comment>
<css>	text-align: center;</css>
<css>	padding: 5px;</css>
<css>	width: 36vw;</css>
<css>	background-color : #345;</css>
<css>	margin-bottom : 0;</css>
<css>	border-radius: 0;</css>
<css>	margin-top: 70px;</css>
<css>	border-top-right-radius : 30px;</css>
<css>	border-top-left-radius : 30px;</css>
<css>	word-break: break-all;</css>
<sc>}</sc>
<css></css>
<sc>.link_box {</sc>
<css>	background: #345;</css>
<css>	margin: 0 auto 30px; 	<comment class="css">/* top sides bottom */</comment></css>
<sc>}</sc>
<css></css>
<sc>.link_box a {</sc>
<css>	display:block;			<comment class="css">/* to take up full row */</comment></css>
<css>	background: #456;</css>
<css>	padding: 10px;</css>
<css>	padding-left: 30px;</css>
<css>	margin: 5px;</css>
<css>	border-top-left-radius: 20px;</css>
<css>	border-top-right-radius: 10px;</css>
<css>	word-wrap: wrap;</css>
<css>	word-break: break-all;</css>
<sc>}</sc>
<css></css>
<sc>.link_box a:hover {</sc>
<css>	background: #358;</css>
<sc>}</sc>
<css></css>
<sc>.image_box {</sc>
<css>	background: #345;</css>
<css>	display: flex;</css>
<css>	flex-wrap: wrap;</css>
<css>	justify-content: space-around;</css>
<sc>}</sc>
<css></css>
<sc>.image_box a {</sc>
<css>	background: #456;</css>
<css>	max-width: 30%;</css>
<css>	border-top-left-radius: 20px;</css>
<css>	border-top-right-radius: 10px;</css>
<css>	padding: 20px;</css>
<css>	margin: 10px;</css>
<css>	display: flex;</css>
<css>	flex-direction : column;</css>
<css>	align-content : center;</css>
<css>	justify-content: center;</css>
<sc>}</sc>
<css></css>
<sc>.image_box a p {</sc>
<css>	background: inherit;</css>
<css>	text-align: center;</css>
<css>	word-wrap: wrap;</css>
<css>	word-break: break-all;</css>
<sc>}</sc>
<css></css>
<sc>.image_box a:hover {</sc>
<css>	background: #358;</css>
<sc>}</sc>
<css></css>
<sc>.image_box img {</sc>
<css>	max-width: 90%;</css>
<css>	object-fit: cover;</css>
<css>	padding:0px;</css>
<css>	margin-left: auto;</css>
<css>	margin-right: auto;</css>
<css>	border: 1px coral solid;</css>
<sc>}</sc>
<css></css>
<sc>pre.notes {</sc>
<css>	background-color: #357;</css>
<css>	color: white;</css>
<css>	word-break: keep-all;</css>
<sc>}</sc>
<css></css>
<sc>.notes sc {</sc>
<css>	color : coral;</css>
<sc>}</sc>
<css></css>
<sc>pre.html {</sc>
<css>	background-color: #375;</css>
<css>	color: #000;</css>
<sc>}</sc>
<css></css>
<sc>.html kw {</sc>
<css>	color: yellow;</css>
<sc>}</sc>
<css></css>
<sc>.html sc {</sc>
<css>	color: yellow;</css>
<sc>}</sc>
<css></css>
<css></css>
<css></css>
<css></css>
<css></css>
<sc>pre.css {</sc>
<css>	background-color: #366;</css>
<css>	color: #eee;	</css>
<sc>}</sc>
<css></css>
<sc>.css sc {</sc>
<css>	color : #3ff;</css>
<sc>}</sc>
<css></css>
<css></css>
<css></css>
<sc>pre.py {</sc>
<css>	background-color: rgb(15,65,75);</css>
<css>	color: #ddf;</css>
<sc>}</sc>
<css></css>
<sc>.py sc {</sc>
<css>	color: #bb2;</css>
<sc>}</sc>
<css></css>
<sc>.py kw {</sc>
<css>	color: coral;</css>
<sc>}</sc>
<css></css>
<css></css>
<css></css>
<sc>pre.js {</sc>
<css>	background-color: rgb(140,110,110);</css>
<css>	color: #321;</css>
<sc>}</sc>
<css></css>
<sc>.js sc {</sc>
<css>	color: #246;</css>
<sc>}</sc>
<css></css>
<sc>.js kw {</sc>
<css>	color: #dba;</css>
<sc>}</sc>
<css></css>
<css></css>
<css></css>
<sc>sc, kw {</sc> <comment class="css">/* special characters and key words */</comment>
<css>	background-color:inherit;</css>
<css>	font-weight: bold;</css>
<sc>}</sc>
<css></css>
<css></css>
<css></css>
<sc>comment {</sc>
<css>	background-color: inherit;</css>
<sc>}</sc>
<css></css>
<css></css>
<sc>css {</sc>
<css>	background-color: inherit;</css>
<css>	color: white;</css>
<sc>}</sc>
<css></css>
<css></css>
<sc>string {</sc>
<css>	background-color: inherit;</css>
<css>	color: pink;</css>
<sc>}</sc>
<css></css>
<sc>comment.css {</sc>
<css>	color: #f64;</css>
<sc>}</sc>
<css></css>
<sc>comment.js {</sc>
<css>	color: #f95;</css>
<sc>}</sc>
<css></css>
<sc>comment.html {</sc>
<css>	color: #242;</css>
<sc>}</sc>
<css></css>
<sc>comment.py {</sc>
<css>	color: #987;</css>
<sc>}</sc>
<css></css>
<sc>comment, dbl_quote, sgl_quote {</sc>
<css>	font-weight : 100;</css>
<sc>}</sc>
<css></css>
<sc>pre.py dbl_quote {</sc>
<css>	color: #1b5;</css>
<sc>}</sc>
<css></css>
<sc>pre.py sgl_quote {</sc>
<css>	color: #1a5;</css>
<sc>}</sc>
<css></css>
<sc>pre.js dbl_quote {</sc>
<css>	color: #bca;</css>
<sc>}</sc>
<css></css>
<sc>pre.js sgl_quote {</sc>
<css>	color: #bca;</css>
<sc>}</sc>
<css></css>
<sc>comment sc, comment kw, sgl_quote sc, sgl_quote kw, dbl_quote sc, dbl_quote kw{</sc>
<css>	color : inherit!important;</css>
<css>	font-weight : inherit!important;</css>
<sc>}</sc>
<css></css>
<css></css>
<css></css>
<sc>comment sc, comment kw {</sc> <comment class="css">/* comment overrides special symbols */</comment>
<css>	color: inherit!important;</css>
<sc>}</sc>
<css></css>
<sc>wedge {</sc> <comment class="css">/*for correct spacing when linking within page */</comment>
<css>	height: 80px;</css>
<css>	padding-top 10px;</css>
<css>	visibility:hidden;</css>
<sc>}</sc>
<css></css>
<css></css>
</pre>
<div class="bookmark">./terminal.js</div><pre class=js>
<comment Class="js">// A fully custom terminal <kw>interface</kw> <kw>with</kw> some very strange capabilities.
</comment>
<comment Class="js">/*
 * TODO
 * keep a stack of commands and run their inveres
 * make function-inverse map
 * have it play back as an animation.
 **/</comment>

<comment Class="js">//----------------------------------------------------------------Initialization of canvas and grid
</comment><kw>var</kw> canvas = document.getElementById<sc>(</sc><sgl_quote>'terminal'</sgl_quote><sc>)</sc><sc>;</sc>
<kw>var</kw> context = canvas.getContext<sc>(</sc><sgl_quote>'2d'</sgl_quote><sc>)</sc><sc>;</sc>
<kw>const</kw> urlParams = <kw>new</kw> URLSearchParams<sc>(</sc>window.location.search<sc>)</sc><sc>;</sc>
<kw>var</kw> num_rows = parseInt<sc>(</sc> urlParams.get<sc>(</sc><sgl_quote>'rows'</sgl_quote><sc>)</sc><sc>)</sc><sc>;</sc>
<kw>if</kw> <sc>(</sc>isNaN<sc>(</sc>num_rows<sc>)</sc><sc>)</sc> <sc>{</sc> num_rows = 32<sc>;</sc> <sc>}</sc>
<kw>var</kw> num_cols = parseInt<sc>(</sc> urlParams.get<sc>(</sc><sgl_quote>'cols'</sgl_quote><sc>)</sc><sc>)</sc><sc>;</sc>
<kw>if</kw> <sc>(</sc>isNaN<sc>(</sc>num_cols<sc>)</sc><sc>)</sc> <sc>{</sc> num_cols = 48<sc>;</sc> <sc>}</sc>
<comment Class="js">// next stuff prevents touch scrolling on mobile/ipad
</comment><kw>function</kw> preventDefault<sc>(</sc>e<sc>)</sc><sc>{</sc>
    e.preventDefault<sc>(</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>
document.body.addEventListener<sc>(</sc><sgl_quote>'touchmove'</sgl_quote>, preventDefault, <sc>{</sc> passive<sc>:</sc> <kw>false</kw> <sc>}</sc><sc>)</sc><sc>;</sc>
<comment Class="js">//-------------------------------------------------------stylus drawing listeners/handlers
</comment><kw>var</kw> drawing_mode = true<sc>;</sc>
<kw>var</kw> pen_down = <kw>false</kw><sc>;</sc>
<kw>var</kw> bb<sc>;</sc> <comment Class="js">// bounding box, to adjust x,y coordinates within the terminal.
</comment>
canvas.onpointerdown = <sc>(</sc>event<sc>)</sc> =&gt <sc>{</sc>
	<kw>if</kw> <sc>(</sc>drawing_mode<sc>)</sc><sc>{</sc>
		pen_down = true<sc>;</sc>
		bb = canvas.getBoundingClientRect<sc>(</sc><sc>)</sc><sc>;</sc> 
		<kw>let</kw> x = <sc>(</sc>event.clientX-bb.left<sc>)</sc>*<sc>(</sc>canvas.width/bb.width<sc>)</sc><sc>;</sc>
		<kw>let</kw> y = <sc>(</sc>event.clientY-bb.top<sc>)</sc>*<sc>(</sc>canvas.height/bb.height<sc>)</sc><sc>;</sc>
		context.moveTo<sc>(</sc>x,y<sc>)</sc><sc>;</sc>
		context.strokeStyle = <dbl_quote>"#369"</dbl_quote><sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

canvas.onpointermove = <sc>(</sc>event<sc>)</sc> =&gt <sc>{</sc>
	<kw>if</kw> <sc>(</sc>pen_down<sc>)</sc><sc>{</sc>
			<kw>let</kw> x = <sc>(</sc>event.clientX-bb.left<sc>)</sc>*<sc>(</sc>canvas.width/bb.width<sc>)</sc><sc>;</sc>
			<kw>let</kw> y = <sc>(</sc>event.clientY-bb.top<sc>)</sc>*<sc>(</sc>canvas.height/bb.height<sc>)</sc><sc>;</sc>
			context.lineTo<sc>(</sc>x,y<sc>)</sc><sc>;</sc>
			context.stroke<sc>(</sc><sc>)</sc><sc>;</sc>
			context.moveTo<sc>(</sc>x,y<sc>)</sc><sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

canvas.onpointerup = <sc>(</sc><sc>)</sc> =&gt <sc>{</sc>
		context.closePath<sc>(</sc><sc>)</sc><sc>;</sc>
		pen_down = <kw>false</kw><sc>;</sc>
<sc>}</sc>
<comment Class="js">//---------------------------------------------Text matrix and color matrix <kw>with</kw> mapping
</comment>
<comment Class="js">// backward and forward scroll stacks
</comment><kw>var</kw> term_memory = <sc>[</sc><sc>]</sc><sc>;</sc>
<kw>var</kw> forward_memory = <sc>[</sc><sc>]</sc><sc>;</sc>

<comment Class="js">// backups <kw>for</kw> when going to text mode
</comment><kw>var</kw> backup_history = <sc>[</sc><sc>]</sc><sc>;</sc>
<kw>var</kw> backup_future = <sc>[</sc><sc>]</sc><sc>;</sc>

<kw>var</kw> text_matrix = Array<sc>(</sc>num_rows<sc>)</sc><sc>;</sc> 
<kw>function</kw> initialize_text_matrix<sc>(</sc><sc>)</sc><sc>{</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> i++<sc>)</sc>
		text_matrix<sc>[</sc>i<sc>]</sc> = Array<sc>(</sc>num_cols<sc>)</sc>.fill<sc>(</sc>-1<sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>var</kw> grid = Array<sc>(</sc>num_rows<sc>)</sc><sc>;</sc>
<kw>function</kw> initialize_grid<sc>(</sc><sc>)</sc><sc>{</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> i++<sc>)</sc><sc>{</sc>
		grid<sc>[</sc>i<sc>]</sc> = Array<sc>(</sc>num_cols<sc>)</sc><sc>;</sc>
		<kw>for</kw> <sc>(</sc><kw>let</kw> j = 0<sc>;</sc> j &lt num_cols<sc>;</sc> j++<sc>)</sc><sc>{</sc>
			grid<sc>[</sc>i<sc>]</sc><sc>[</sc>j<sc>]</sc> = <sc>[</sc>i,j<sc>]</sc><sc>;</sc>
		<sc>}</sc>
	<sc>}</sc>	
<sc>}</sc>

<comment Class="js">// <kw>for</kw> mapping from the grid to the text_matrix<sc>:</sc>
</comment><kw>function</kw> text_map<sc>(</sc>i,j<sc>)</sc> <sc>{</sc> 
	<kw>return</kw> text_matrix<sc>[</sc>grid<sc>[</sc>i<sc>]</sc><sc>[</sc>j<sc>]</sc><sc>[</sc>0<sc>]</sc><sc>]</sc><sc>[</sc>grid<sc>[</sc>i<sc>]</sc><sc>[</sc>j<sc>]</sc><sc>[</sc>1<sc>]</sc><sc>]</sc><sc>;</sc>
<sc>}</sc>

<comment Class="js">//--------------------------------------------Printing and cursor functions<sc>:</sc>
</comment>
<comment Class="js">// to fix negative cursor indices...
</comment>Number.prototype.mod = <kw>function</kw><sc>(</sc>n<sc>)</sc> <sc>{</sc>
	<kw>return</kw> <sc>(</sc><sc>(</sc><kw>this</kw>%n<sc>)</sc>+n<sc>)</sc>%n<sc>;</sc>
<sc>}</sc><sc>;</sc>

<kw>function</kw> cursor_up<sc>(</sc><sc>)</sc><sc>{</sc>
	<kw>if</kw> <sc>(</sc>cursor_row == 0 && term_memory.length<sc>)</sc>
		old_line<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> cursor_row = Math.max<sc>(</sc>cursor_row - 1, 0<sc>)</sc><sc>;</sc>
<sc>}</sc>
<kw>function</kw> cursor_down<sc>(</sc><sc>)</sc><sc>{</sc>
	<kw>if</kw> <sc>(</sc>cursor_row == <sc>(</sc>num_rows - 1<sc>)</sc> && forward_memory.length<sc>)</sc>
		back_from_the_future<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> cursor_row = Math.min<sc>(</sc>cursor_row + 1, num_rows - 1<sc>)</sc><sc>;</sc>
<sc>}</sc>
<kw>function</kw> cursor_right<sc>(</sc><sc>)</sc><sc>{</sc>
	cursor_col = <sc>(</sc>cursor_col+1<sc>)</sc>%num_cols<sc>;</sc>
<sc>}</sc>
<kw>function</kw> cursor_left<sc>(</sc><sc>)</sc><sc>{</sc>
	cursor_col = <sc>(</sc>cursor_col-1<sc>)</sc>.mod<sc>(</sc>num_cols<sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> back_space<sc>(</sc><sc>)</sc><sc>{</sc>
	<kw>if</kw> <sc>(</sc>cursor_col &gt 0<sc>)</sc>
		text_matrix<sc>[</sc>cursor_row<sc>]</sc><sc>[</sc>--cursor_col<sc>]</sc> = -1<sc>;</sc>
<sc>}</sc>

<kw>function</kw> delete_row<sc>(</sc><sc>)</sc><sc>{</sc>
	<comment Class="js">//<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt num_cols<sc>;</sc> i++<sc>)</sc>
</comment>	<comment Class="js">//	text_matrix<sc>[</sc>cursor_row<sc>]</sc><sc>[</sc>i<sc>]</sc> = -1<sc>;</sc>
</comment>	fit_canvas<sc>(</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> tab<sc>(</sc><sc>)</sc><sc>{</sc>
	cursor_col = <sc>(</sc>cursor_col+4<sc>)</sc>%num_cols<sc>;</sc>
<sc>}</sc>

<kw>function</kw> clear<sc>(</sc><sc>)</sc><sc>{</sc>
	term_memory = <sc>[</sc><sc>]</sc><sc>;</sc>
	forward_memory = <sc>[</sc><sc>]</sc><sc>;</sc>
	initialize_text_matrix<sc>(</sc><sc>)</sc><sc>;</sc>
	cursor_row = 0<sc>;</sc>
	cursor_col = 0<sc>;</sc>
<sc>}</sc>

<kw>var</kw> cursor_col = 0<sc>;</sc>
<kw>var</kw> cursor_row = 0<sc>;</sc>
<kw>var</kw> terminal_mode = true<sc>;</sc>
<kw>var</kw> text_mode = <kw>false</kw><sc>;</sc>

<kw>function</kw> new_line<sc>(</sc><sc>)</sc> <sc>{</sc>
	term_memory.push<sc>(</sc>text_matrix.shift<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
	text_matrix.push<sc>(</sc>Array<sc>(</sc>num_cols<sc>)</sc>.fill<sc>(</sc>-1<sc>)</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> old_line<sc>(</sc><sc>)</sc> <sc>{</sc>
	<kw>if</kw> <sc>(</sc>term_memory.length<sc>)</sc>
		text_matrix.unshift<sc>(</sc>term_memory.pop<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
	forward_memory.push<sc>(</sc>text_matrix.pop<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> back_from_the_future<sc>(</sc><sc>)</sc> <sc>{</sc>
	<kw>if</kw> <sc>(</sc>forward_memory.length<sc>)</sc><sc>{</sc>
		term_memory.push<sc>(</sc>text_matrix.shift<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
		text_matrix.push<sc>(</sc>forward_memory.pop<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> write<sc>(</sc>key<sc>)</sc> <sc>{</sc>
	text_matrix<sc>[</sc>cursor_row<sc>]</sc><sc>[</sc>cursor_col<sc>]</sc> = key<sc>;</sc>
	<kw>if</kw> <sc>(</sc>cursor_col == num_cols - 1<sc>)</sc><sc>{</sc>
		cursor_col = 0<sc>;</sc>
		<kw>if</kw> <sc>(</sc><sc>(</sc>cursor_row + 1<sc>)</sc> == num_rows<sc>)</sc>
			new_line<sc>(</sc><sc>)</sc><sc>;</sc>
		<kw>else</kw> cursor_row = <sc>(</sc>cursor_row+1<sc>)</sc>%num_rows<sc>;</sc>
	<sc>}</sc> <kw>else</kw> <sc>{</sc>
		cursor_col += 1<sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> echo<sc>(</sc>buffer<sc>)</sc> <sc>{</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt buffer.length<sc>;</sc> i++<sc>)</sc>
		write<sc>(</sc>buffer<sc>[</sc>i<sc>]</sc><sc>)</sc><sc>;</sc>
	<kw>if</kw> <sc>(</sc>cursor_col &gt 0<sc>)</sc><sc>{</sc> <comment Class="js">// linebreak after printing
</comment>		<kw>if</kw> <sc>(</sc><sc>(</sc>cursor_row + 1<sc>)</sc> == num_rows<sc>)</sc>
			new_line<sc>(</sc><sc>)</sc><sc>;</sc>
		<kw>else</kw> cursor_row++<sc>;</sc>
		cursor_col = 0<sc>;</sc>
	<sc>}</sc>
<sc>}</sc>


<kw>var</kw> ps1 = <dbl_quote>"$"</dbl_quote><sc>;</sc>
<kw>function</kw> prompt<sc>(</sc><sc>)</sc><sc>{</sc>
	<kw>if</kw> <sc>(</sc>ps1<sc>)</sc><sc>{</sc>
		write<sc>(</sc>ps1<sc>)</sc><sc>;</sc> 
		cursor_col++<sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>const</kw> invalid_usage = <dbl_quote>"● Invalid usage ●"</dbl_quote><sc>;</sc>

<kw>function</kw> help<sc>(</sc>title, list<sc>)</sc><sc>{</sc> <comment Class="js">//TODO does not handle long lines
</comment>	title = <dbl_quote>"<sc>:</sc><sc>:</sc>"</dbl_quote> + title + <dbl_quote>"<sc>:</sc><sc>:</sc>"</dbl_quote><sc>;</sc>
	echo<sc>(</sc>title + <dbl_quote>" "</dbl_quote>.repeat<sc>(</sc>num_cols-title.length<sc>)</sc><sc>)</sc><sc>;</sc>
	echo<sc>(</sc><sgl_quote>'●'</sgl_quote> + <sgl_quote>'―'</sgl_quote>.repeat<sc>(</sc>num_cols-2<sc>)</sc> + <dbl_quote>"●"</dbl_quote><sc>)</sc><sc>;</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt list.length<sc>;</sc> i++<sc>)</sc>
		echo<sc>(</sc><dbl_quote>"| "</dbl_quote> + list<sc>[</sc>i<sc>]</sc> + <dbl_quote>" "</dbl_quote>.repeat<sc>(</sc>num_cols-list<sc>[</sc>i<sc>]</sc>.length - 3<sc>)</sc> + <dbl_quote>"|"</dbl_quote><sc>)</sc><sc>;</sc>
	echo<sc>(</sc><sgl_quote>'●'</sgl_quote> + <sgl_quote>'―'</sgl_quote>.repeat<sc>(</sc>num_cols-2<sc>)</sc> + <dbl_quote>"●"</dbl_quote><sc>)</sc><sc>;</sc>
<sc>}</sc>


initialize_text_matrix<sc>(</sc><sc>)</sc><sc>;</sc>
initialize_grid<sc>(</sc><sc>)</sc><sc>;</sc>

<kw>function</kw> ls<sc>(</sc><sc>)</sc><sc>{</sc>
	help<sc>(</sc><dbl_quote>"File Listing"</dbl_quote>, Object.keys<sc>(</sc>file_list<sc>)</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> cat<sc>(</sc>file_name<sc>)</sc> <sc>{</sc>
	<kw>if</kw> <sc>(</sc>file_list.hasOwnProperty<sc>(</sc>file_name<sc>)</sc><sc>)</sc>
		help<sc>(</sc>file_name, file_list<sc>[</sc>file_name<sc>]</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <sc>{</sc>
		echo<sc>(</sc>invalid_usage<sc>)</sc><sc>;</sc>
		echo<sc>(</sc><dbl_quote>"<sc>:</sc><sc>:</sc>cat must be called on a file"</dbl_quote><sc>)</sc><sc>;</sc>
		echo<sc>(</sc><dbl_quote>"<sc>:</sc><sc>:</sc>example usage<sc>:</sc> cat about"</dbl_quote><sc>)</sc><sc>;</sc>
		echo<sc>(</sc><dbl_quote>"<sc>:</sc><sc>:</sc>use ls to see a file listing"</dbl_quote><sc>)</sc><sc>;</sc>
		<comment Class="js">//echo<sc>(</sc>"<sc>:</sc><sc>:</sc>use help cat to learn more"<sc>)</sc><sc>;</sc>
</comment>	<sc>}</sc>
<sc>}</sc>
	
<comment Class="js">//---------------------------Everything related to color manipulation <kw>in</kw> phase mode<sc>:</sc> 
</comment><kw>function</kw> Color<sc>(</sc>name<sc>)</sc><sc>{</sc>
	<kw>this</kw>.name = name<sc>;</sc>
	<kw>this</kw>.amp = 0<sc>;</sc>
	<kw>this</kw>.freq = 6.283/num_rows<sc>;</sc>
	<kw>this</kw>.phase = 0<sc>;</sc>
	<kw>this</kw>.center = 0<sc>;</sc>
	<kw>this</kw>.toString = <kw>function</kw> <sc>(</sc><sc>)</sc> <sc>{</sc>
		<kw>return</kw> <sc>[</sc> <kw>this</kw>.name   , 	<sgl_quote>'Mag<sc>:</sc>'</sgl_quote>, <kw>this</kw>.amp, <sgl_quote>'|'</sgl_quote>,
			<sgl_quote>'Frq<sc>:</sc>'</sgl_quote>, Math.round<sc>(</sc>num_rows*<kw>this</kw>.freq/6.28*100<sc>)</sc>/100, <sgl_quote>'|'</sgl_quote>,
			<sgl_quote>'Pha<sc>:</sc>'</sgl_quote>, <kw>this</kw>.phase,    <sgl_quote>'|'</sgl_quote>, 
			<sgl_quote>'Cen<sc>:</sc>'</sgl_quote>, <kw>this</kw>.center<sc>]</sc>.join<sc>(</sc><sgl_quote>' '</sgl_quote><sc>)</sc><sc>;</sc>
	<sc>}</sc><sc>;</sc>

	<kw>this</kw>.sin = <kw>function</kw> <sc>(</sc>x<sc>)</sc> <sc>{</sc>
		<kw>return</kw> Math.round<sc>(</sc>Math.sin<sc>(</sc><kw>this</kw>.freq*<sc>(</sc>x+<kw>this</kw>.phase<sc>)</sc><sc>)</sc>*<kw>this</kw>.amp+<kw>this</kw>.center<sc>)</sc><sc>;</sc>
	<sc>}</sc><sc>;</sc>
<sc>}</sc><sc>;</sc>

<kw>var</kw> gradient = <sc>{</sc>
	red 		<sc>:</sc> <kw>new</kw> Color<sc>(</sc><sgl_quote>'<sc>[</sc>Red<sc>]</sc>'</sgl_quote><sc>)</sc>,
	grn 		<sc>:</sc> <kw>new</kw> Color<sc>(</sc><sgl_quote>'<sc>[</sc>Grn<sc>]</sc>'</sgl_quote><sc>)</sc>,
	blu 		<sc>:</sc> <kw>new</kw> Color<sc>(</sc><sgl_quote>'<sc>[</sc>Blu<sc>]</sc>'</sgl_quote><sc>)</sc>,
	rgb_codes	<sc>:</sc> <kw>new</kw> Array<sc>(</sc>num_rows<sc>)</sc>,

	generate_codes  <sc>:</sc> <kw>function</kw><sc>(</sc><sc>)</sc> <sc>{</sc>
		<kw>for</kw> <sc>(</sc><kw>var</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> ++i<sc>)</sc><sc>{</sc>
			<kw>this</kw>.rgb_codes<sc>[</sc>i<sc>]</sc> = <sc>(</sc><sgl_quote>'rgb<sc>(</sc>'</sgl_quote>+<kw>this</kw>.red.sin<sc>(</sc>i<sc>)</sc>+<sgl_quote>','</sgl_quote>+
				<kw>this</kw>.grn.sin<sc>(</sc>i<sc>)</sc>+<sgl_quote>','</sgl_quote>+
				<kw>this</kw>.blu.sin<sc>(</sc>i<sc>)</sc>+<sgl_quote>'<sc>)</sc>'</sgl_quote><sc>)</sc><sc>;</sc><sc>}</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> waves<sc>(</sc><sc>)</sc><sc>{</sc>
	echo<sc>(</sc>gradient.red.toString<sc>(</sc><sc>)</sc>.replace<sc>(</sc>/\s/g,<sgl_quote>''</sgl_quote><sc>)</sc><sc>)</sc><sc>;</sc>
	echo<sc>(</sc>gradient.grn.toString<sc>(</sc><sc>)</sc>.replace<sc>(</sc>/\s/g,<sgl_quote>''</sgl_quote><sc>)</sc><sc>)</sc><sc>;</sc>
	echo<sc>(</sc>gradient.blu.toString<sc>(</sc><sc>)</sc>.replace<sc>(</sc>/\s/g,<sgl_quote>''</sgl_quote><sc>)</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>




<kw>function</kw> invert_color<sc>(</sc>string<sc>)</sc><sc>{</sc>
	<kw>return</kw><sc>;</sc>
<sc>}</sc>

<kw>function</kw> reset_colors<sc>(</sc><sc>)</sc> <sc>{</sc>		
		gradient.red 		= <kw>new</kw> Color<sc>(</sc><sgl_quote>'<sc>[</sc>Red<sc>]</sc>'</sgl_quote><sc>)</sc>,
		gradient.grn 		= <kw>new</kw> Color<sc>(</sc><sgl_quote>'<sc>[</sc>Grn<sc>]</sc>'</sgl_quote><sc>)</sc>,
		gradient.blu 		= <kw>new</kw> Color<sc>(</sc><sgl_quote>'<sc>[</sc>Blu<sc>]</sc>'</sgl_quote><sc>)</sc>,
		gradient.rgb_codes	= <kw>new</kw> Array<sc>(</sc>num_rows<sc>)</sc>,

		gradient.generate_codes  = <kw>function</kw><sc>(</sc><sc>)</sc> <sc>{</sc>
			<kw>for</kw> <sc>(</sc><kw>var</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> ++i<sc>)</sc><sc>{</sc>
				<kw>this</kw>.rgb_codes<sc>[</sc>i<sc>]</sc> = <sc>(</sc><sgl_quote>'rgb<sc>(</sc>'</sgl_quote>+<kw>this</kw>.red.sin<sc>(</sc>i<sc>)</sc>+<sgl_quote>','</sgl_quote>+
					<kw>this</kw>.grn.sin<sc>(</sc>i<sc>)</sc>+<sgl_quote>','</sgl_quote>+
					<kw>this</kw>.blu.sin<sc>(</sc>i<sc>)</sc>+<sgl_quote>'<sc>)</sc>'</sgl_quote><sc>)</sc><sc>;</sc><sc>}</sc>
				<sc>}</sc>

		gradient.generate_codes<sc>(</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> set_text_color<sc>(</sc>rgb<sc>)</sc> <sc>{</sc>
	<kw>if</kw> <sc>(</sc>isHexColor<sc>(</sc>rgb<sc>)</sc><sc>)</sc>
		text_color = <dbl_quote>"#"</dbl_quote> + rgb<sc>;</sc>
	<kw>else</kw> <sc>{</sc>
		echo<sc>(</sc>invalid_usage<sc>)</sc><sc>;</sc>
		echo<sc>(</sc><dbl_quote>"<sc>:</sc><sc>:</sc>txtcolor must be called <kw>with</kw> an RGB hex code"</dbl_quote><sc>)</sc><sc>;</sc>
		echo<sc>(</sc><dbl_quote>"<sc>:</sc><sc>:</sc>example usage<sc>:</sc> txtcolor fff or txtcolor 3366ff"</dbl_quote><sc>)</sc><sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> isHexColor <sc>(</sc>hex<sc>)</sc> <sc>{</sc>
  <kw>return</kw> <kw>typeof</kw> hex === <sgl_quote>'string'</sgl_quote>
      && <sc>(</sc>hex.length === 3 || hex.length === 6<sc>)</sc>
      && <sc>!</sc>isNaN<sc>(</sc>Number<sc>(</sc><sgl_quote>'0x'</sgl_quote> + hex<sc>)</sc><sc>)</sc>
<sc>}</sc>

<kw>function</kw> rgb<sc>(</sc><sc>)</sc><sc>{</sc> <comment Class="js">// to be depracated ?
</comment>	alert<sc>(</sc>gradient.rgb_codes<sc>)</sc><sc>;</sc>
<sc>}</sc> 
reset_colors<sc>(</sc><sc>)</sc><sc>;</sc>
<comment Class="js">//--------------------------------------------------------------Drawing to canvas.
</comment><kw>var</kw> display = <kw>false</kw><sc>;</sc>
<kw>var</kw> text_hidden = <kw>false</kw><sc>;</sc>
<kw>var</kw> cursor_color = <sgl_quote>'#47a'</sgl_quote><sc>;</sc>
<kw>var</kw> text_color = <sgl_quote>'#69c'</sgl_quote><sc>;</sc>
<kw>function</kw> grid_to_canvas<sc>(</sc><sc>)</sc><sc>{</sc>
	<kw>var</kw> ver_div = canvas.width/num_cols<sc>;</sc>
	<kw>var</kw> hor_div = canvas.height/num_rows<sc>;</sc>
	<kw>for</kw> <sc>(</sc><kw>var</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> i++<sc>)</sc><sc>{</sc>
		<kw>for</kw> <sc>(</sc><kw>var</kw> j = 0<sc>;</sc> j &lt num_cols<sc>;</sc> j++<sc>)</sc><sc>{</sc>
			<kw>let</kw> x = j * hor_div<sc>;</sc>
			<kw>let</kw> y = i * ver_div<sc>;</sc>
			<kw>let</kw> color = gradient.rgb_codes<sc>[</sc>grid<sc>[</sc>i<sc>]</sc><sc>[</sc>j<sc>]</sc><sc>[</sc>0<sc>]</sc><sc>]</sc><sc>;</sc> <comment Class="js">// color element
</comment>			context.fillStyle = color<sc>;</sc>
			<kw>if</kw> <sc>(</sc>text_hidden<sc>)</sc><sc>{</sc> <comment Class="js">// fill background no matter what
</comment>				context.fillRect<sc>(</sc>x , y, hor_div, ver_div<sc>)</sc><sc>;</sc>	
			<sc>}</sc> <kw>else</kw> <sc>{</sc> <comment Class="js">// otherwise fill background and text on top of it
</comment>				<kw>if</kw> <sc>(</sc>terminal_mode && cursor_row == grid<sc>[</sc>i<sc>]</sc><sc>[</sc>j<sc>]</sc><sc>[</sc>0<sc>]</sc> && cursor_col == grid<sc>[</sc>i<sc>]</sc><sc>[</sc>j<sc>]</sc><sc>[</sc>1<sc>]</sc><sc>)</sc>
					context.fillStyle = cursor_color<sc>;</sc>

				context.fillRect<sc>(</sc>x , y, hor_div, ver_div<sc>)</sc><sc>;</sc>
				<kw>let</kw> character = text_map<sc>(</sc>i,j<sc>)</sc><sc>;</sc>
				<kw>if</kw> <sc>(</sc>character <sc>!</sc>= -1<sc>)</sc><sc>{</sc> <comment Class="js">// need to draw char.
</comment>					context.fillStyle = text_color<sc>;</sc>
					<kw>if</kw> <sc>(</sc><dbl_quote>"●◷◵◴◶→←―|↑↓_"</dbl_quote>.includes<sc>(</sc>character<sc>)</sc><sc>)</sc> <comment Class="js">// orange special chars
</comment>						context.fillStyle = <sgl_quote>'#f60'</sgl_quote><sc>;</sc>
					<kw>if</kw> <sc>(</sc><dbl_quote>"<sc>:</sc>$₽"</dbl_quote>.includes<sc>(</sc>character<sc>)</sc><sc>)</sc>   <comment Class="js">// blue special chars
</comment>						context.fillStyle = <dbl_quote>"#369"</dbl_quote><sc>;</sc>
					<kw>if</kw> <sc>(</sc><dbl_quote>"<sc>[</sc><sc>]</sc><sc>(</sc><sc>)</sc><sc>{</sc><sc>}</sc>&gt&lt+=-*/</comment>"</dbl_quote>.includes<sc>(</sc>character<sc>)</sc><sc>)</sc>  <comment Class="js">// yellow special chars
</comment>						context.fillStyle = <dbl_quote>"#990"</dbl_quote><sc>;</sc>
					context.fillText<sc>(</sc>character, Math.round<sc>(</sc>x+hor_div/4<sc>)</sc>, Math.round<sc>(</sc>y+ver_div/5<sc>)</sc><sc>)</sc><sc>;</sc>
				<sc>}</sc>
			<sc>}</sc>
		<sc>}</sc>
	<sc>}</sc>

	<comment Class="js">//context.rotate<sc>(</sc>0.1<sc>)</sc><sc>;</sc>
</comment>	<comment Class="js">//// investigate <kw>this</kw><sc>!</sc> <kw>this</kw> is how you get rotated characters bro<sc>!</sc>
</comment>	<comment Class="js">//context.translate<sc>(</sc>x,y<sc>)</sc>
</comment>	<comment Class="js">//context.transform<sc>(</sc>a,b,c,d,e,f<sc>)</sc> most advanced transformations
</comment>	<kw>if</kw> <sc>(</sc>display<sc>)</sc><sc>{</sc> <comment Class="js">// <kw>this</kw> is <kw>if</kw> color information display is turned on
</comment>		context.fillStyle = <dbl_quote>"#000"</dbl_quote><sc>;</sc>
		context.fillRect<sc>(</sc>Math.round<sc>(</sc>canvas.width/5<sc>)</sc> ,ver_div/2, Math.round<sc>(</sc>3*canvas.width/5<sc>)</sc>, ver_div*4<sc>)</sc><sc>;</sc>
		context.textBaseline = <dbl_quote>"top"</dbl_quote><sc>;</sc>
		context.textAlign = <dbl_quote>"center"</dbl_quote><sc>;</sc>
		context.fillStyle = <dbl_quote>"#a33"</dbl_quote><sc>;</sc>
		context.fillText<sc>(</sc>gradient.red.toString<sc>(</sc><sc>)</sc>, canvas.width/2,   ver_div<sc>)</sc><sc>;</sc>
		context.fillStyle = <dbl_quote>"#3a3"</dbl_quote><sc>;</sc>
		context.fillText<sc>(</sc>gradient.grn.toString<sc>(</sc><sc>)</sc>, canvas.width/2, 2*ver_div<sc>)</sc><sc>;</sc>
		context.fillStyle = <dbl_quote>"#36f"</dbl_quote><sc>;</sc>
		context.fillText<sc>(</sc>gradient.blu.toString<sc>(</sc><sc>)</sc>, canvas.width/2, 3*ver_div<sc>)</sc><sc>;</sc>
		context.textAlign = <dbl_quote>"start"</dbl_quote><sc>;</sc>
	<sc>}</sc>
<sc>}</sc>	
<comment Class="js">//-------------------------------------------key event listener & key -&gt <kw>function</kw> maps
</comment>
<kw>var</kw> keys_down = <sc>{</sc>
	<sgl_quote>'r'</sgl_quote><sc>:</sc> <kw>false</kw>, 	<sgl_quote>'g'</sgl_quote><sc>:</sc> <kw>false</kw>,  	<sgl_quote>'b'</sgl_quote><sc>:</sc> <kw>false</kw>, 	<sgl_quote>'p'</sgl_quote><sc>:</sc> <kw>false</kw>,
	<sgl_quote>'f'</sgl_quote><sc>:</sc> <kw>false</kw>,		<sgl_quote>'m'</sgl_quote><sc>:</sc> <kw>false</kw>, 	<sgl_quote>'c'</sgl_quote><sc>:</sc> <kw>false</kw>, 	<sgl_quote>'e'</sgl_quote><sc>:</sc> <kw>false</kw>,
	<sgl_quote>'h'</sgl_quote><sc>:</sc> <kw>false</kw>,
<sc>}</sc><sc>;</sc>
<kw>const</kw> key_function_map = <sc>{</sc>
	<sgl_quote>'i'</sgl_quote><sc>:</sc> torus_up,		<sgl_quote>'k'</sgl_quote><sc>:</sc> torus_down,	<sgl_quote>'j'</sgl_quote><sc>:</sc> torus_left,
	<sgl_quote>'l'</sgl_quote><sc>:</sc> torus_right,	<sgl_quote>'w'</sgl_quote><sc>:</sc> mobius_up,		<sgl_quote>'s'</sgl_quote><sc>:</sc> mobius_down,
	<sgl_quote>'a'</sgl_quote><sc>:</sc> mobius_left,	<sgl_quote>'d'</sgl_quote><sc>:</sc> mobius_right,      <sgl_quote>'t'</sgl_quote><sc>:</sc> transpose,
	<sgl_quote>'.'</sgl_quote><sc>:</sc> <sc>(</sc><sc>)</sc> =&gt <sc>{</sc> display ^= true<sc>;</sc> <sc>}</sc>, 
	<sgl_quote>'`'</sgl_quote><sc>:</sc> <sc>(</sc><sc>)</sc> =&gt <sc>{</sc> alert<sc>(</sc>gradient.rgb_codes<sc>)</sc><sc>;</sc> <sc>}</sc>,
	<sgl_quote>'h'</sgl_quote><sc>:</sc> <sc>(</sc><sc>)</sc> =&gt <sc>{</sc> text_hidden ^= true<sc>;</sc> <sc>}</sc>,
	<sgl_quote>'Escape'</sgl_quote><sc>:</sc> <sc>(</sc><sc>)</sc> =&gt <sc>{</sc> 
		<kw>if</kw> <sc>(</sc><sc>!</sc>terminal_mode && <sc>!</sc>text_mode<sc>)</sc><sc>{</sc> <comment Class="js">// means phase_mode 
</comment>			terminal_mode = true<sc>;</sc> 
			text_hidden = <kw>false</kw><sc>;</sc> 
			display = <kw>false</kw><sc>;</sc>
		<sc>}</sc>
	<sc>}</sc>,
	<sgl_quote>'='</sgl_quote> <sc>:</sc>  reset_colors,

	<sgl_quote>'ArrowUp'</sgl_quote> <sc>:</sc> <sc>(</sc><sc>)</sc> =&gt 	<sc>{</sc><kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'r'</sgl_quote><sc>]</sc><sc>)</sc><sc>{</sc> 
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'f'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.freq *= 1.01<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'p'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.phase += 1<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'m'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.amp += 5<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'c'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.center += 5<sc>;</sc>
				<sc>}</sc>
				<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'g'</sgl_quote><sc>]</sc><sc>)</sc><sc>{</sc> 
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'f'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.grn.freq *= 1.01<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'p'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.grn.phase += 1<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'m'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.grn.amp += 5<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'c'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.grn.center += 5<sc>;</sc>
				<sc>}</sc>
				<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'b'</sgl_quote><sc>]</sc><sc>)</sc><sc>{</sc> 
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'f'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.blu.freq *= 1.01<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'p'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.blu.phase += 1<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'m'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.blu.amp += 5<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'c'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.blu.center += 5<sc>;</sc>
				<sc>}</sc>
			<sc>}</sc>,

	<sgl_quote>'ArrowDown'</sgl_quote> <sc>:</sc> <sc>(</sc><sc>)</sc> =&gt 	<sc>{</sc><kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'r'</sgl_quote><sc>]</sc><sc>)</sc><sc>{</sc> 
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'f'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.freq /= 1.01<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'p'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.phase -= 1<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'m'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.amp -= 5<sc>;</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'c'</sgl_quote><sc>]</sc><sc>)</sc>
						gradient.red.center -= 5<sc>;</sc>
				<sc>}</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'g'</sgl_quote><sc>]</sc><sc>)</sc><sc>{</sc> 
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'f'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.grn.freq /= 1.01<sc>;</sc>
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'p'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.grn.phase -= 1<sc>;</sc>
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'m'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.grn.amp -= 5<sc>;</sc>
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'c'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.grn.center -= 5<sc>;</sc>
					<sc>}</sc>
					<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'b'</sgl_quote><sc>]</sc><sc>)</sc><sc>{</sc> 
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'f'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.blu.freq /= 1.01<sc>;</sc>
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'p'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.blu.phase -= 1<sc>;</sc>
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'m'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.blu.amp -= 5<sc>;</sc>
						<kw>if</kw> <sc>(</sc>keys_down<sc>[</sc><sgl_quote>'c'</sgl_quote><sc>]</sc><sc>)</sc>
							gradient.blu.center -= 5<sc>;</sc>
					<sc>}</sc>
				<sc>}</sc>
<sc>}</sc><sc>;</sc>
<comment Class="js">//---------------------------------------------------------------Commands and maps
</comment>command_list = <sc>[</sc><dbl_quote>"about"</dbl_quote>, <dbl_quote>"cat"</dbl_quote>, <dbl_quote>"clear"</dbl_quote>, <dbl_quote>"codes"</dbl_quote>, <dbl_quote>"echo"</dbl_quote>, 
				<dbl_quote>"help"</dbl_quote>, <dbl_quote>"ls"</dbl_quote>, <dbl_quote>"programs"</dbl_quote>, <dbl_quote>"refresh"</dbl_quote>, <dbl_quote>"rgb"</dbl_quote>,
				<dbl_quote>"txtcolor"</dbl_quote>, <dbl_quote>"visual"</dbl_quote>,
				<dbl_quote>"____________________________________________"</dbl_quote>,
				<dbl_quote>"◶ SPECIAL MODES    <sc>(</sc>press <sc>[</sc>esc<sc>]</sc> to <kw>return</kw><sc>)</sc> ◵"</dbl_quote>,
				<dbl_quote>"text"</dbl_quote>,
				<dbl_quote>"phase"</dbl_quote>
				<sc>]</sc><sc>;</sc>
<comment Class="js">// TODO pull from properties of command map rather than actually writing <kw>this</kw> list
</comment>
program_list = <sc>[</sc><dbl_quote>"quest"</dbl_quote>, <dbl_quote>"princess"</dbl_quote>, <dbl_quote>"fifteen"</dbl_quote>, <dbl_quote>"sixteen"</dbl_quote>, <dbl_quote>"game"</dbl_quote>, <dbl_quote>"territory"</dbl_quote><sc>]</sc>

<comment Class="js">// put these <kw>in</kw> a <kw>function</kw> map
</comment><kw>function</kw> execute_command<sc>(</sc>buffer<sc>)</sc> <sc>{</sc>
	<kw>let</kw> command = buffer.join<sc>(</sc><dbl_quote>""</dbl_quote><sc>)</sc><sc>;</sc>
	<kw>if</kw> <sc>(</sc>command == <dbl_quote>"clear"</dbl_quote><sc>)</sc> 		clear<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command.startsWith<sc>(</sc><dbl_quote>"echo"</dbl_quote><sc>)</sc><sc>)</sc> 	echo<sc>(</sc>buffer.slice<sc>(</sc>5<sc>)</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command.startsWith<sc>(</sc><dbl_quote>"txtcolor"</dbl_quote><sc>)</sc><sc>)</sc>	set_text_color<sc>(</sc>buffer.slice<sc>(</sc>9<sc>)</sc>.join<sc>(</sc><sgl_quote>''</sgl_quote><sc>)</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command.startsWith<sc>(</sc><dbl_quote>"cat"</dbl_quote><sc>)</sc><sc>)</sc>    cat<sc>(</sc>buffer.slice<sc>(</sc>4<sc>)</sc>.join<sc>(</sc><sgl_quote>''</sgl_quote><sc>)</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"help"</dbl_quote><sc>)</sc> 			help<sc>(</sc><dbl_quote>"Commands Available"</dbl_quote>, command_list<sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"programs"</dbl_quote><sc>)</sc>		help<sc>(</sc><dbl_quote>"Program Listing"</dbl_quote>, program_list<sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"codes"</dbl_quote><sc>)</sc> 		rgb<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"about"</dbl_quote><sc>)</sc>        cat<sc>(</sc><dbl_quote>"about"</dbl_quote><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"unscramble"</dbl_quote><sc>)</sc> 	initialize_grid<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"reset"</dbl_quote><sc>)</sc> 		reset_colors<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"rgb"</dbl_quote><sc>)</sc> 			waves<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"rubles"</dbl_quote><sc>)</sc> 		ps1 = <dbl_quote>"₽"</dbl_quote><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"dollars"</dbl_quote><sc>)</sc> 		ps1 = <dbl_quote>"$"</dbl_quote><sc>;</sc>
	<comment Class="js">//<kw>else</kw> <kw>if</kw> <sc>(</sc>command == "undo"<sc>)</sc> 		grid = JSON.parse<sc>(</sc>JSON.stringify<sc>(</sc>b_grid<sc>)</sc><sc>)</sc><sc>;</sc>
</comment>	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"quest"</dbl_quote><sc>)</sc> 		quest<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"game"</dbl_quote> <sc>)</sc>     	game<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"princess"</dbl_quote><sc>)</sc> 	princess<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"sixteen"</dbl_quote><sc>)</sc>		sixteen<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"visual"</dbl_quote><sc>)</sc>		visual<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"phase"</dbl_quote><sc>)</sc>		<sc>{</sc>terminal_mode = <kw>false</kw><sc>;</sc>display=true<sc>;</sc>text_hidden=true<sc>;</sc><sc>}</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"text"</dbl_quote><sc>)</sc>			enter_text_mode<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"fifteen"</dbl_quote><sc>)</sc>		fifteen<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"territory"</dbl_quote><sc>)</sc>    territory<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"refresh"</dbl_quote><sc>)</sc>		location.reload<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"rmps1"</dbl_quote><sc>)</sc>			ps1 = <dbl_quote>""</dbl_quote><sc>;</sc>
	<kw>else</kw> <kw>if</kw> <sc>(</sc>command == <dbl_quote>"ls"</dbl_quote><sc>)</sc>			ls<sc>(</sc><sc>)</sc><sc>;</sc>
	<kw>else</kw> echo <sc>(</sc><dbl_quote>"● Invalid command ● Type help ●"</dbl_quote><sc>)</sc><sc>;</sc>
<sc>}</sc>

<comment Class="js">//----------------------------------------------------------------------------------Out-links
</comment>
<kw>function</kw> quest<sc>(</sc><sc>)</sc>	<sc>{</sc>location.assign<sc>(</sc><sgl_quote>'./exe/quest/main.html'</sgl_quote><sc>)</sc><sc>;</sc><sc>}</sc>
<kw>function</kw> princess<sc>(</sc><sc>)</sc>	<sc>{</sc>location.assign<sc>(</sc><sgl_quote>'./exe/princess/main.html'</sgl_quote><sc>)</sc><sc>;</sc><sc>}</sc>
<kw>function</kw> sixteen<sc>(</sc><sc>)</sc>	<sc>{</sc>location.assign<sc>(</sc><sgl_quote>'./exe/sixteen/main.html'</sgl_quote><sc>)</sc><sc>;</sc><sc>}</sc>
<kw>function</kw> fifteen<sc>(</sc><sc>)</sc>	<sc>{</sc>location.assign<sc>(</sc><sgl_quote>'./exe/fifteen/main.html'</sgl_quote><sc>)</sc><sc>;</sc><sc>}</sc>
<kw>function</kw> game<sc>(</sc><sc>)</sc> 	<sc>{</sc>location.assign<sc>(</sc><sgl_quote>'./exe/game/main.html'</sgl_quote><sc>)</sc><sc>;</sc> <sc>}</sc>
<kw>function</kw> territory<sc>(</sc><sc>)</sc><sc>{</sc>location.assign<sc>(</sc><sgl_quote>'./exe/territory/main.html'</sgl_quote><sc>)</sc><sc>;</sc> <sc>}</sc>
<kw>function</kw> visual<sc>(</sc><sc>)</sc>   <sc>{</sc>location.assign<sc>(</sc><sgl_quote>'./visual.html'</sgl_quote><sc>)</sc><sc>;</sc> <sc>}</sc>

<kw>var</kw> cursor_backup<sc>;</sc>
<kw>var</kw> b_grid<sc>;</sc> <comment Class="js">//backup grid
</comment>
<comment Class="js">// everyone reccomends <kw>this</kw> <kw>for</kw> deep copy
</comment><kw>function</kw> backup<sc>(</sc>grid<sc>)</sc> <sc>{</sc><comment Class="js">//TODO decide whether <kw>this</kw> is multi-purpose or not
</comment>	b_grid = JSON.parse<sc>(</sc>JSON.stringify<sc>(</sc>grid<sc>)</sc><sc>)</sc><sc>;</sc>
	backup_history = JSON.parse<sc>(</sc>JSON.stringify<sc>(</sc>term_memory<sc>)</sc><sc>)</sc><sc>;</sc>
	backup_future = JSON.parse<sc>(</sc>JSON.stringify<sc>(</sc>forward_memory<sc>)</sc><sc>)</sc><sc>;</sc>
	term_memory = <sc>[</sc><sc>]</sc><sc>;</sc>
	forward_memory = <sc>[</sc><sc>]</sc><sc>;</sc>
	<kw>return</kw> 0<sc>;</sc>
<sc>}</sc>

<kw>function</kw> enter_text_mode<sc>(</sc><sc>)</sc><sc>{</sc>
	backup<sc>(</sc>text_matrix<sc>)</sc><sc>;</sc>
	cursor_backup = <sc>[</sc>cursor_row, cursor_col<sc>]</sc>
	clear<sc>(</sc><sc>)</sc><sc>;</sc>
	ps1 = <dbl_quote>""</dbl_quote><sc>;</sc>
	text_mode = true<sc>;</sc>
<sc>}</sc>

<kw>function</kw> exit_text_mode<sc>(</sc><sc>)</sc><sc>{</sc>
	ps1 = <dbl_quote>"$"</dbl_quote><sc>;</sc>
	text_mode = <kw>false</kw><sc>;</sc>
	text_matrix = b_grid<sc>;</sc>
	cursor_row = cursor_backup<sc>[</sc>0<sc>]</sc><sc>;</sc>
	cursor_col = cursor_backup<sc>[</sc>1<sc>]</sc><sc>;</sc>
	term_memory = backup_history<sc>;</sc>
	forward_memory = backup_future<sc>;</sc>
<sc>}</sc>

<comment Class="js">//TODO need separate handler <kw>for</kw> every mode <kw>this</kw> is getting bloated
</comment><kw>var</kw> buffer = <sc>[</sc><sc>]</sc> <comment Class="js">/* IMPORTANT <sc>:</sc> input buffer  */</comment>
window.addEventListener<sc>(</sc><sgl_quote>'keydown'</sgl_quote>, <sc>(</sc>event<sc>)</sc> =&gt <sc>{</sc>

	<kw>if</kw> <sc>(</sc>text_mode && event.key == <dbl_quote>"Escape"</dbl_quote><sc>)</sc><sc>{</sc>
		exit_text_mode<sc>(</sc><sc>)</sc><sc>;</sc>
		prompt<sc>(</sc><sc>)</sc><sc>;</sc>
	<sc>}</sc>

	<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'Delete'</sgl_quote><sc>)</sc><sc>{</sc>
		delete_row<sc>(</sc><sc>)</sc><sc>;</sc>
	<sc>}</sc>

	<kw>if</kw> <sc>(</sc>terminal_mode == true<sc>)</sc><sc>{</sc>

		<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'Enter'</sgl_quote><sc>)</sc><sc>{</sc>
			cursor_col = 0<sc>;</sc>
			<kw>if</kw> <sc>(</sc><sc>(</sc>cursor_row + 1<sc>)</sc> == num_rows<sc>)</sc>
				new_line<sc>(</sc><sc>)</sc><sc>;</sc>
			<kw>else</kw> cursor_row++<sc>;</sc>
			<kw>if</kw> <sc>(</sc>buffer.length && <sc>!</sc>text_mode<sc>)</sc><sc>{</sc>
				execute_command<sc>(</sc>Array.from<sc>(</sc>buffer<sc>)</sc><sc>)</sc><sc>;</sc>
			<sc>}</sc>
			buffer = <sc>[</sc><sc>]</sc><sc>;</sc>
			prompt<sc>(</sc><sc>)</sc><sc>;</sc>
		<sc>}</sc>
		<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'Backspace'</sgl_quote><sc>)</sc><sc>{</sc>
			<kw>if</kw> <sc>(</sc>buffer.length && <sc>!</sc>text_mode<sc>)</sc>
				buffer.pop<sc>(</sc><sc>)</sc><sc>;</sc>
			back_space<sc>(</sc><sc>)</sc><sc>;</sc>
		<sc>}</sc>
		<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'ArrowUp'</sgl_quote><sc>)</sc><sc>{</sc>
			cursor_up<sc>(</sc><sc>)</sc><sc>;</sc>
		<sc>}</sc>
		<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'ArrowDown'</sgl_quote><sc>)</sc><sc>{</sc>
			cursor_down<sc>(</sc><sc>)</sc><sc>;</sc>
		<sc>}</sc>
		<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'ArrowRight'</sgl_quote><sc>)</sc><sc>{</sc>
			cursor_right<sc>(</sc><sc>)</sc><sc>;</sc>
		<sc>}</sc>
		<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'ArrowLeft'</sgl_quote><sc>)</sc><sc>{</sc>
			cursor_left<sc>(</sc><sc>)</sc><sc>;</sc>
		<sc>}</sc>
		<kw>if</kw> <sc>(</sc>event.key == <sgl_quote>'Tab'</sgl_quote><sc>)</sc><sc>{</sc>
			tab<sc>(</sc><sc>)</sc><sc>;</sc>
			event.preventDefault<sc>(</sc><sc>)</sc><sc>;</sc>
		<sc>}</sc>
		<kw>if</kw> <sc>(</sc>event.key.length === 1<sc>)</sc><sc>{</sc>
			event.preventDefault<sc>(</sc><sc>)</sc><sc>;</sc>
			<kw>if</kw> <sc>(</sc><sc>!</sc>text_mode<sc>)</sc>
				buffer.push<sc>(</sc>event.key<sc>)</sc><sc>;</sc>
			write<sc>(</sc>event.key<sc>)</sc><sc>;</sc>
		<sc>}</sc>
		grid_to_canvas<sc>(</sc><sc>)</sc><sc>;</sc>
		<kw>return</kw><sc>;</sc>
	<sc>}</sc>

	<kw>if</kw> <sc>(</sc>keys_down.hasOwnProperty<sc>(</sc>event.key<sc>)</sc><sc>)</sc><sc>{</sc>
		keys_down<sc>[</sc>event.key<sc>]</sc> = true<sc>;</sc>
	<sc>}</sc>
	<kw>if</kw> <sc>(</sc>key_function_map.hasOwnProperty<sc>(</sc>event.key<sc>)</sc><sc>)</sc>
		key_function_map<sc>[</sc>event.key<sc>]</sc><sc>(</sc><sc>)</sc><sc>;</sc>

	gradient.generate_codes<sc>(</sc><sc>)</sc><sc>;</sc>
	grid_to_canvas<sc>(</sc><sc>)</sc><sc>;</sc>
<sc>}</sc><sc>)</sc><sc>;</sc>

window.addEventListener<sc>(</sc><sgl_quote>'keyup'</sgl_quote>, <sc>(</sc>event<sc>)</sc> =&gt <sc>{</sc>
	<kw>if</kw> <sc>(</sc>keys_down.hasOwnProperty<sc>(</sc>event.key<sc>)</sc><sc>)</sc>
		keys_down<sc>[</sc>event.key<sc>]</sc> = <kw>false</kw><sc>;</sc>
<sc>}</sc><sc>)</sc><sc>;</sc>

<comment Class="js">//-------------------------------------------------------Resize Event Listener
</comment>window.addEventListener<sc>(</sc><dbl_quote>"resize"</dbl_quote>, fit_canvas<sc>)</sc><sc>;</sc>
window.addEventListener<sc>(</sc><dbl_quote>"onload"</dbl_quote>, fit_canvas<sc>)</sc><sc>;</sc>
window.addEventListener<sc>(</sc><dbl_quote>"onload"</dbl_quote>, canvas.focus<sc>)</sc><sc>;</sc>
window.addEventListener<sc>(</sc><dbl_quote>"onload"</dbl_quote>, prompt<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>

<comment Class="js">// when it tries to get as tall as possible to fit, there end up being
</comment><comment Class="js">// extra cols on the right side
</comment>
<kw>function</kw> fit_canvas<sc>(</sc><sc>)</sc><sc>{</sc><comment Class="js">// resizing <kw>this</kw> way is costly and clobbers anything that was drawn. 
</comment>	context = canvas.getContext<sc>(</sc><sgl_quote>'2d'</sgl_quote><sc>)</sc><sc>;</sc>
	<kw>let</kw> available_x_pixels = window.innerWidth-32<sc>;</sc>
	<kw>let</kw> available_y_pixels = window.innerHeight-32<sc>;</sc>
	<kw>let</kw> desired_ratio = num_cols/num_rows<sc>;</sc> <comment Class="js">//width to height
</comment>	<kw>let</kw> window_ratio = available_x_pixels/available_y_pixels<sc>;</sc>
	<kw>let</kw> actual_width = 0<sc>;</sc>
	<kw>let</kw> actual_height = 0<sc>;</sc>
	<kw>if</kw> <sc>(</sc>desired_ratio &gt window_ratio <sc>)</sc><sc>{</sc> <comment Class="js">// too narrow, width dominates
</comment>		actual_width = available_x_pixels<sc>;</sc>
		actual_height = Math.round<sc>(</sc>actual_width/<sc>(</sc>desired_ratio<sc>)</sc><sc>)</sc><sc>;</sc>
		actual_width -= actual_width%<sc>(</sc>num_cols<sc>)</sc><sc>;</sc>
		actual_height -= actual_height%<sc>(</sc>num_rows<sc>)</sc><sc>;</sc> 
	<sc>}</sc> <kw>else</kw> <sc>{</sc> <comment Class="js">// too wide, height dominates
</comment>		actual_height = available_y_pixels<sc>;</sc>
		actual_width = Math.round<sc>(</sc>actual_height*<sc>(</sc>desired_ratio<sc>)</sc><sc>)</sc><sc>;</sc>
		actual_height -= actual_height%<sc>(</sc>num_rows<sc>)</sc><sc>;</sc>
		actual_width -= actual_width%<sc>(</sc>num_cols<sc>)</sc><sc>;</sc> 
	<sc>}</sc>
	canvas.setAttribute<sc>(</sc><sgl_quote>'width'</sgl_quote>, actual_width.toString<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc> 
	canvas.setAttribute<sc>(</sc><sgl_quote>'height'</sgl_quote>, actual_height.toString<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
	canvas.width = canvas.width<sc>;</sc> canvas.height = canvas.height<sc>;</sc>
	context.textAlign = <dbl_quote>"start"</dbl_quote><sc>;</sc>
	context.textBaseline = <dbl_quote>"top"</dbl_quote><sc>;</sc>
	context.lineCap = <dbl_quote>"round"</dbl_quote><sc>;</sc>
	context.lineJoin = <dbl_quote>"round"</dbl_quote><sc>;</sc>
	context.lineWidth = 3<sc>;</sc>
	<kw>let</kw> font_size_pixels = Math.round<sc>(</sc>actual_height/num_rows*0.8<sc>)</sc><sc>;</sc>
	context.font = <dbl_quote>"Bold "</dbl_quote> + font_size_pixels+<dbl_quote>"px Courier"</dbl_quote><sc>;</sc>	
	grid_to_canvas<sc>(</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> change_font<sc>(</sc>font<sc>)</sc> <sc>{</sc>
	<kw>return</kw><sc>;</sc>
<sc>}</sc>

gradient.generate_codes<sc>(</sc><sc>)</sc><sc>;</sc>
fit_canvas<sc>(</sc><sc>)</sc><sc>;</sc>

<comment Class="js">//-----------------------------------------------------------------------------------Motion functions
</comment><kw>function</kw> torus_up<sc>(</sc><sc>)</sc>		<sc>{</sc>
	<kw>let</kw> temp = grid.shift<sc>(</sc><sc>)</sc><sc>;</sc> 
	grid.push<sc>(</sc>temp<sc>)</sc><sc>;</sc>
<sc>}</sc>
<kw>function</kw> torus_down<sc>(</sc><sc>)</sc>	<sc>{</sc>
	<kw>let</kw> temp = grid.pop<sc>(</sc><sc>)</sc><sc>;</sc> 
	grid.unshift<sc>(</sc>temp<sc>)</sc><sc>;</sc>
<sc>}</sc>
<kw>function</kw> torus_left<sc>(</sc><sc>)</sc>	<sc>{</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> i++<sc>)</sc> <sc>{</sc>
		<kw>let</kw> temp = grid<sc>[</sc>i<sc>]</sc>.shift<sc>(</sc><sc>)</sc><sc>;</sc> grid<sc>[</sc>i<sc>]</sc>.push<sc>(</sc>temp<sc>)</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> torus_right<sc>(</sc><sc>)</sc>	<sc>{</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> i++<sc>)</sc> <sc>{</sc>
		<kw>let</kw> temp = grid<sc>[</sc>i<sc>]</sc>.pop<sc>(</sc><sc>)</sc><sc>;</sc> grid<sc>[</sc>i<sc>]</sc>.unshift<sc>(</sc>temp<sc>)</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> mobius_up<sc>(</sc><sc>)</sc>	<sc>{</sc>
	<kw>let</kw> temp = grid.shift<sc>(</sc><sc>)</sc><sc>;</sc> 
	grid.push<sc>(</sc>temp.reverse<sc>(</sc><sc>)</sc><sc>)</sc>
<sc>}</sc>

<kw>function</kw> mobius_down<sc>(</sc><sc>)</sc>	<sc>{</sc>
	<kw>let</kw> temp = grid.pop<sc>(</sc><sc>)</sc><sc>;</sc> 
	grid.unshift<sc>(</sc>temp.reverse<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>function</kw> mobius_left<sc>(</sc><sc>)</sc>	<sc>{</sc>
	<kw>let</kw> row = <sc>[</sc><sc>]</sc><sc>;</sc> 
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> i++<sc>)</sc> <sc>{</sc>
		row.unshift<sc>(</sc>grid<sc>[</sc>i<sc>]</sc>.shift<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
	<sc>}</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> j = 0<sc>;</sc> j &lt num_rows<sc>;</sc> j++<sc>)</sc><sc>{</sc>
		grid<sc>[</sc>j<sc>]</sc>.push<sc>(</sc>row<sc>[</sc>j<sc>]</sc><sc>)</sc><sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> mobius_right<sc>(</sc><sc>)</sc>	<sc>{</sc>
	<kw>let</kw> row = <sc>[</sc><sc>]</sc><sc>;</sc> 
	<kw>for</kw> <sc>(</sc><kw>let</kw> i = 0<sc>;</sc> i &lt num_rows<sc>;</sc> i++<sc>)</sc> <sc>{</sc>
		row.unshift<sc>(</sc>grid<sc>[</sc>i<sc>]</sc>.pop<sc>(</sc><sc>)</sc><sc>)</sc><sc>;</sc>
	<sc>}</sc>
	<kw>for</kw> <sc>(</sc><kw>let</kw> j = 0<sc>;</sc> j &lt num_rows<sc>;</sc> j++<sc>)</sc> <sc>{</sc> 
		grid<sc>[</sc>j<sc>]</sc>.unshift<sc>(</sc>row<sc>[</sc>j<sc>]</sc><sc>)</sc><sc>;</sc>
	<sc>}</sc>
<sc>}</sc>

<kw>function</kw> transpose<sc>(</sc><sc>)</sc> <sc>{</sc> 
	<kw>if</kw> <sc>(</sc>num_rows == num_cols<sc>)</sc>
		grid =  grid<sc>[</sc>0<sc>]</sc>.map<sc>(</sc><sc>(</sc>col, i<sc>)</sc> =&gt grid.map<sc>(</sc>row =&gt row<sc>[</sc>i<sc>]</sc><sc>)</sc><sc>)</sc><sc>;</sc>
<sc>}</sc>

<kw>var</kw> file_list = <sc>{</sc>
	<dbl_quote>"about"</dbl_quote> <sc>:</sc> 
	<sc>[</sc>
	 	<dbl_quote>"Welcome to the ●Mobius Terminal●"</dbl_quote>,
	 	<dbl_quote>"This is a small Unix-like command line"</dbl_quote>,
	 	<dbl_quote>"<kw>with</kw> some special properties..."</dbl_quote>,
	 	<dbl_quote>"Some are readily available, some are hidden,"</dbl_quote>,
	 	<dbl_quote>"and some will emerge from experimentation."</dbl_quote>,	
	 	<dbl_quote>"<sc>:</sc>phase<sc>:</sc> toggles a special '</sgl_quote>phase mode'</sgl_quote>"</dbl_quote>,
		<dbl_quote>"<sc>:</sc>cat<sc>:</sc> the phase_mode file to learn more."</dbl_quote>,
		<dbl_quote>"You might find something interesting."</dbl_quote>
	<sc>]</sc>,

	<dbl_quote>"phase_mode"</dbl_quote> <sc>:</sc> 
	<sc>[</sc>
		<dbl_quote>"The phase command toggles PHASE MODE."</dbl_quote>,
		<dbl_quote>"In phase mode, you can SLIDE the grid."</dbl_quote>,
		<dbl_quote>"<sc>[</sc>IJKL<sc>]</sc> keys translate it along a Torus"</dbl_quote>,
		<dbl_quote>"<sc>[</sc>WASD<sc>]</sc> keys translate it along a"</dbl_quote>,
		<dbl_quote>"Real Projective Plane, which"</dbl_quote>,
		<dbl_quote>"acts like a ●Mobius● strip <kw>in</kw> all directions."</dbl_quote>,
		<dbl_quote>"If you find things get too scrambled up,"</dbl_quote>, 
		<dbl_quote>"the unscramble command may be helpful."</dbl_quote>,
		<dbl_quote>"---------------------------------------------"</dbl_quote>,
		<dbl_quote>"Here you can also control the color gradient<sc>:</sc>"</dbl_quote>,
		<dbl_quote>"defined by three waves<sc>:</sc> red, green, and blue."</dbl_quote>,
		<dbl_quote>"Each wave has four alterable properties<sc>:</sc>"</dbl_quote>,
		<dbl_quote>"magnitude, frequency, center, and phase."</dbl_quote>,
		<dbl_quote>"By <kw>default</kw>, all color centers are set to 0,"</dbl_quote>,
		<dbl_quote>"<kw>this</kw> is why the screen is black"</dbl_quote>,
		<dbl_quote>"pressing <sc>[</sc>.<sc>]</sc> toggles <kw>this</kw> information."</dbl_quote>,
		<dbl_quote>"To adjust a particular property level<sc>:</sc>,"</dbl_quote>,
		<dbl_quote>"hold keys <kw>for</kw> the FIRST LETTERS"</dbl_quote>,
		<dbl_quote>"of the property you want to change,"</dbl_quote>,
		<dbl_quote>"and adjust <kw>with</kw> the <sc>[</sc>↓<sc>]</sc> or <sc>[</sc>↑<sc>]</sc> arrow keys."</dbl_quote>,
		<dbl_quote>"ex<sc>:</sc> holding <sc>[</sc>b<sc>]</sc> <kw>with</kw> <sc>[</sc>c<sc>]</sc> and pressing <sc>[</sc>↑<sc>]</sc>"</dbl_quote>,
		<dbl_quote>"raises the blue center<sc>:</sc> see it grow blue."</dbl_quote>,
		<dbl_quote>"holding <sc>[</sc>b<sc>]</sc> <kw>with</kw> <sc>[</sc>m<sc>]</sc> and pressing <sc>[</sc>↑<sc>]</sc>"</dbl_quote>,
		<dbl_quote>"raises the blue magnitude<sc>:</sc> blue fluctuates."</dbl_quote>,
		<dbl_quote>"Altering all the waves produces gradients."</dbl_quote>,
		<dbl_quote>"Some can be quite beautiful, and they become"</dbl_quote>,
		<dbl_quote>"even more interesting when scrambled"</dbl_quote>,
		<dbl_quote>"Experiment <kw>with</kw> it and see."</dbl_quote>,
		<dbl_quote>"<sc>[</sc>=<sc>]</sc> resets colors, <sc>[</sc>h<sc>]</sc> toggles text."</dbl_quote>
	<sc>]</sc>
<sc>}</sc><sc>;</sc>
</pre>
<div class="bookmark">./parser.py</div><pre class=py>
<sgl_quote>''</sgl_quote><sgl_quote>'
Here <kw>is</kw> a program that takes a list of directories <kw>as</kw> input,
<kw>and</kw> outputs a formatted html page to display pages <kw>and</kw> code 
<kw>in</kw> an aesthetic way.

It parses python <kw>and</kw> javascript <kw>and</kw> html <kw>and</kw> css code so far,
putting <kw>in</kw> tags <kw>for</kw> syntax hilighting.

To use this script you need your target page to be <kw>in</kw> a
sub-directory, the front page to be named main.html <sc>(</sc><kw>for</kw> linking<sc>)</sc>
<kw>and</kw> optionally a picture <kw>in</kw> the directory called screenshot
'</sgl_quote><sgl_quote>''</sgl_quote>

<kw>import</kw> sys, os.path, re

<kw>import</kw> time

special_symbols = list<sc>(</sc><sgl_quote>'<sc>[</sc><sc>]</sc><sc>(</sc><sc>)</sc><sc>{</sc><sc>}</sc><sc>:</sc><sc>;</sc><sc>!</sc>'</sgl_quote><sc>)</sc>

js_reserved = <sc>[</sc>
    <dbl_quote>"<kw>await</kw>"</dbl_quote>,    <dbl_quote>"<kw>break</kw>"</dbl_quote>,    <dbl_quote>"case"</dbl_quote>,
    <dbl_quote>"catch"</dbl_quote>,    <dbl_quote>"<kw>class</kw>"</dbl_quote>,    <dbl_quote>"const"</dbl_quote>,
    <dbl_quote>"<kw>continue</kw>"</dbl_quote>, <dbl_quote>"debugger"</dbl_quote>, <dbl_quote>"default"</dbl_quote>,
    <dbl_quote>"delete"</dbl_quote>,   <dbl_quote>"do"</dbl_quote>,       <dbl_quote>"<kw>else</kw>"</dbl_quote>,
    <dbl_quote>"enum"</dbl_quote>,     <dbl_quote>"export"</dbl_quote>,   <dbl_quote>"extends"</dbl_quote>,
    <dbl_quote>"false"</dbl_quote>,    <dbl_quote>"<kw>finally</kw>"</dbl_quote>,  <dbl_quote>"<kw>for</kw>"</dbl_quote>,
    <dbl_quote>"function"</dbl_quote>, <dbl_quote>"<kw>if</kw>"</dbl_quote>,       <dbl_quote>"implements"</dbl_quote>,
    <dbl_quote>"<kw>import</kw>"</dbl_quote>,   <dbl_quote>"<kw>in</kw>"</dbl_quote>,       <dbl_quote>"instanceof"</dbl_quote>,
    <dbl_quote>"interface"</dbl_quote>,<dbl_quote>"let"</dbl_quote>,      <dbl_quote>"new"</dbl_quote>,
    <dbl_quote>"null"</dbl_quote>,     <dbl_quote>"package"</dbl_quote>,  <dbl_quote>"private"</dbl_quote>,
    <dbl_quote>"protected"</dbl_quote>,<dbl_quote>"public"</dbl_quote>,   <dbl_quote>"<kw>return</kw>"</dbl_quote>,
    <dbl_quote>"super"</dbl_quote>,    <dbl_quote>"switch"</dbl_quote>,   <dbl_quote>"static"</dbl_quote>,
    <dbl_quote>"this"</dbl_quote>,     <dbl_quote>"throw"</dbl_quote>,    <dbl_quote>"<kw>try</kw>"</dbl_quote>,
    <dbl_quote>"<kw>True</kw>"</dbl_quote>,     <dbl_quote>"typeof"</dbl_quote>,   <dbl_quote>"var"</dbl_quote>,
    <dbl_quote>"void"</dbl_quote>,     <dbl_quote>"<kw>while</kw>"</dbl_quote>,    <dbl_quote>"<kw>with</kw>"</dbl_quote>,
    <dbl_quote>"<kw>yield</kw>"</dbl_quote>,
<sc>]</sc>

py_reserved = <sc>[</sc>
    <sgl_quote>'<kw>False</kw>'</sgl_quote>,    <sgl_quote>'<kw>None</kw>'</sgl_quote>,     <sgl_quote>'<kw>True</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>and</kw>'</sgl_quote>,      <sgl_quote>'<kw>as</kw>'</sgl_quote>,       <sgl_quote>'<kw>assert</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>async</kw>'</sgl_quote>,    <sgl_quote>'<kw>await</kw>'</sgl_quote>,    <sgl_quote>'<kw>break</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>class</kw>'</sgl_quote>,    <sgl_quote>'<kw>continue</kw>'</sgl_quote>, <sgl_quote>'<kw>def</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>del</kw>'</sgl_quote>,      <sgl_quote>'<kw>elif</kw>'</sgl_quote>,     <sgl_quote>'<kw>else</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>except</kw>'</sgl_quote>,   <sgl_quote>'<kw>finally</kw>'</sgl_quote>,  <sgl_quote>'<kw>for</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>from</kw>'</sgl_quote>,     <sgl_quote>'<kw>global</kw>'</sgl_quote>,   <sgl_quote>'<kw>if</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>import</kw>'</sgl_quote>,   <sgl_quote>'<kw>in</kw>'</sgl_quote>,       <sgl_quote>'<kw>is</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>lambda</kw>'</sgl_quote>,   <sgl_quote>'<kw>nonlocal</kw>'</sgl_quote>, <sgl_quote>'<kw>not</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>or</kw>'</sgl_quote>,       <sgl_quote>'<kw>pass</kw>'</sgl_quote>,     <sgl_quote>'<kw>raise</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>return</kw>'</sgl_quote>,   <sgl_quote>'<kw>try</kw>'</sgl_quote>,      <sgl_quote>'<kw>while</kw>'</sgl_quote>, 
    <sgl_quote>'<kw>with</kw>'</sgl_quote>,     <sgl_quote>'<kw>yield</kw>'</sgl_quote>
<sc>]</sc>

c_reserved = <sc>[</sc>
    <sgl_quote>'auto'</sgl_quote>,     <sgl_quote>'<kw>break</kw>'</sgl_quote>,    <sgl_quote>'case'</sgl_quote>,
    <sgl_quote>'char'</sgl_quote>,     <sgl_quote>'const'</sgl_quote>,    <sgl_quote>'<kw>continue</kw>'</sgl_quote>,
    <sgl_quote>'default'</sgl_quote>,  <sgl_quote>'do'</sgl_quote>,       <sgl_quote>'double'</sgl_quote>,
    <sgl_quote>'<kw>else</kw>'</sgl_quote>,     <sgl_quote>'enum'</sgl_quote>,     <sgl_quote>'extern'</sgl_quote>,   
    <sgl_quote>'float'</sgl_quote>,    <sgl_quote>'<kw>for</kw>'</sgl_quote>,      <sgl_quote>'goto'</sgl_quote>,
    <sgl_quote>'<kw>if</kw>'</sgl_quote>,       <sgl_quote>'inline'</sgl_quote>,   <sgl_quote>'int'</sgl_quote>,
    <sgl_quote>'long'</sgl_quote>,     <sgl_quote>'register'</sgl_quote>, <sgl_quote>'restrict'</sgl_quote>,
    <sgl_quote>'<kw>return</kw>'</sgl_quote>,   <sgl_quote>'short'</sgl_quote>,    <sgl_quote>'signed'</sgl_quote>,
    <sgl_quote>'sizeof'</sgl_quote>,   <sgl_quote>'static'</sgl_quote>,   <sgl_quote>'struct'</sgl_quote>,
    <sgl_quote>'switch'</sgl_quote>,   <sgl_quote>'typedef'</sgl_quote>,  <sgl_quote>'union'</sgl_quote>,
    <sgl_quote>'unsigned'</sgl_quote>, <sgl_quote>'void'</sgl_quote>,     <sgl_quote>'volatile'</sgl_quote>,
    <sgl_quote>'<kw>while</kw>'</sgl_quote>,    <sgl_quote>'_Alingas'</sgl_quote>, <sgl_quote>'_Alignof'</sgl_quote>,
    <sgl_quote>'_Atomic'</sgl_quote>,  <sgl_quote>'_Bool'</sgl_quote>,    <sgl_quote>'_Complex'</sgl_quote>,
    <sgl_quote>'_Decimal128'</sgl_quote>,          <sgl_quote>'_Decimal32'</sgl_quote>,
    <sgl_quote>'_Decimal64'</sgl_quote>,           <sgl_quote>'_Generic'</sgl_quote>,
    <sgl_quote>'_Imaginary'</sgl_quote>,           <sgl_quote>'_Noreturn'</sgl_quote>,
    <sgl_quote>'_Static_assert'</sgl_quote>,       <sgl_quote>'_Thread_local'</sgl_quote>,
<sc>]</sc>

image_extensions = <sc>[</sc><sgl_quote>'.jpg'</sgl_quote>, <sgl_quote>'.png'</sgl_quote>, <sgl_quote>'.JPG'</sgl_quote>, <sgl_quote>'.PNG'</sgl_quote><sc>]</sc>

<kw>def</kw> findWholeWord<sc>(</sc>w<sc>)</sc><sc>:</sc>
    <kw>return</kw> re.compile<sc>(</sc>r<sgl_quote>'\b<sc>(</sc><sc>{</sc>0<sc>}</sc><sc>)</sc>\b'</sgl_quote>.format<sc>(</sc>w<sc>)</sc><sc>)</sc>.search

<kw>if</kw> __name__ == <dbl_quote>"__main__"</dbl_quote><sc>:</sc>
    <kw>for</kw> directory <kw>in</kw> sys.argv<sc>[</sc>1<sc>:</sc><sc>]</sc><sc>:</sc>
        <kw>for</kw> <sc>(</sc>root, subs, files<sc>)</sc> <kw>in</kw> os.walk<sc>(</sc>directory<sc>)</sc><sc>:</sc>

            depth = root.count<sc>(</sc><sgl_quote>'/'</sgl_quote><sc>)</sc>
            
            js_readers = <sc>[</sc><sc>]</sc>
            html_readers = <sc>[</sc><sc>]</sc>
            css_readers = <sc>[</sc><sc>]</sc>
            txt_readers = <sc>[</sc><sc>]</sc>
            py_readers = <sc>[</sc><sc>]</sc>
            pictures = <sc>[</sc><sc>]</sc>

            content = <sc>[</sc>js_readers, html_readers, css_readers,
                        py_readers, txt_readers, pictures<sc>]</sc>
            
            <kw>if</kw> os.path.exists<sc>(</sc><dbl_quote>"./"</dbl_quote> + root + <dbl_quote>"/"</dbl_quote> + <dbl_quote>"formatted.html"</dbl_quote><sc>)</sc><sc>:</sc>
                os.remove<sc>(</sc><dbl_quote>"./"</dbl_quote> + root + <dbl_quote>"/"</dbl_quote> + <dbl_quote>"formatted.html"</dbl_quote><sc>)</sc>
            print<sc>(</sc>root, subs, files<sc>)</sc>
            
            <kw>if</kw> <sgl_quote>'/_'</sgl_quote> <kw>in</kw> root <kw>or</kw> <sgl_quote>'xterm'</sgl_quote> <kw>in</kw> root<sc>:</sc>
                <kw>continue</kw>
            <kw>for</kw> name <kw>in</kw> files<sc>:</sc>
                print<sc>(</sc>name<sc>)</sc>
                <kw>if</kw> <sgl_quote>'screenshot'</sgl_quote> <kw>in</kw> name<sc>:</sc>
                    pictures.append<sc>(</sc>name<sc>)</sc>
                <kw>if</kw> name.endswith<sc>(</sc><sgl_quote>'.js'</sgl_quote><sc>)</sc><sc>:</sc>
                    <kw>with</kw> open<sc>(</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>)</sc> <kw>as</kw> temp<sc>:</sc>
                        js_readers.append<sc>(</sc><sc>[</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>]</sc> + temp.readlines<sc>(</sc><sc>)</sc><sc>)</sc>
                <kw>if</kw> name.endswith<sc>(</sc><sgl_quote>'.html'</sgl_quote><sc>)</sc> <kw>and</kw> <sgl_quote>'formatted'</sgl_quote> <kw>not</kw> <kw>in</kw> name<sc>:</sc>
                    <kw>with</kw> open<sc>(</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>)</sc> <kw>as</kw> temp<sc>:</sc>                
                        html_readers.append<sc>(</sc><sc>[</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>]</sc> + temp.readlines<sc>(</sc><sc>)</sc><sc>)</sc>
                <kw>if</kw> name.endswith<sc>(</sc><sgl_quote>'.css'</sgl_quote><sc>)</sc><sc>:</sc>
                    <kw>with</kw> open<sc>(</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>)</sc> <kw>as</kw> temp<sc>:</sc>                
                        css_readers.append<sc>(</sc><sc>[</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>]</sc> + temp.readlines<sc>(</sc><sc>)</sc><sc>)</sc>
                <kw>if</kw> name.endswith<sc>(</sc><sgl_quote>'.txt'</sgl_quote><sc>)</sc><sc>:</sc>
                    <kw>with</kw> open<sc>(</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>)</sc> <kw>as</kw> temp<sc>:</sc>                
                        txt_readers.append<sc>(</sc><sc>[</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>]</sc> + temp.readlines<sc>(</sc><sc>)</sc><sc>)</sc>
                <kw>if</kw> name.endswith<sc>(</sc><sgl_quote>'.py'</sgl_quote><sc>)</sc><sc>:</sc>
                    <kw>with</kw> open<sc>(</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>)</sc> <kw>as</kw> temp<sc>:</sc>                
                        py_readers.append<sc>(</sc><sc>[</sc>root+<sgl_quote>'/'</sgl_quote>+name<sc>]</sc> + temp.readlines<sc>(</sc><sc>)</sc><sc>)</sc>

            <kw>if</kw> any<sc>(</sc>content<sc>)</sc><sc>:</sc> 
                _of     = open<sc>(</sc><dbl_quote>"./"</dbl_quote> + root + <dbl_quote>"/"</dbl_quote> + <dbl_quote>"formatted.html"</dbl_quote>, <dbl_quote>"w+"</dbl_quote><sc>)</sc>
            <kw>else</kw><sc>:</sc>
                <kw>continue</kw>

            _of.write<sc>(</sc><sgl_quote>'&lt<sc>!</sc>doctype html&gt'</sgl_quote><sc>)</sc>
            _of.write<sc>(</sc><sgl_quote>'&lthtml lang="en"&gt'</sgl_quote><sc>)</sc>
            _of.write<sc>(</sc><sgl_quote>'&lthead&gt'</sgl_quote><sc>)</sc>
            _of.write<sc>(</sc><sgl_quote>'  &ltmeta charset="utf-8"&gt'</sgl_quote><sc>)</sc>
            _of.write<sc>(</sc><sgl_quote>'  &lttitle&gtѬ&lt/title&gt'</sgl_quote><sc>)</sc>
            _of.write<sc>(</sc><sgl_quote>'&ltlink href="'</sgl_quote> +  <sgl_quote>'../'</sgl_quote>*depth + <sgl_quote>'style.css" rel="stylesheet"/&gt'</sgl_quote><sc>)</sc>
            _of.write<sc>(</sc><sgl_quote>'&lt/head&gt'</sgl_quote><sc>)</sc>
            _of.write<sc>(</sc><sgl_quote>'&ltbody&gt'</sgl_quote><sc>)</sc>

            <kw>if</kw> pictures<sc>:</sc>
                <kw>if</kw> os.path.exists<sc>(</sc><dbl_quote>"./"</dbl_quote> + root + <dbl_quote>"/"</dbl_quote> + <dbl_quote>"main.html"</dbl_quote><sc>)</sc><sc>:</sc>
                    _of.write<sc>(</sc><sgl_quote>'\n\n&ltdiv <kw>class</kw>="image"&gt\n\t &lta href="main.html"&gt \n\t\t'</sgl_quote> + 
                    <sgl_quote>'&ltimg <kw>class</kw>="screenshot" src="'</sgl_quote> + pictures<sc>[</sc>0<sc>]</sc> + <sgl_quote>'"&gt&lt/img&gt\n\t &lt/a&gt \n&lt/div&gt\n\n'</sgl_quote><sc>)</sc>
                <kw>else</kw><sc>:</sc>
                    _of.write<sc>(</sc><sgl_quote>'\n\n&ltdiv <kw>class</kw>="image"&gt'</sgl_quote> +  
                    <sgl_quote>'&ltimg <kw>class</kw>="screenshot" src="'</sgl_quote> + pictures<sc>[</sc>0<sc>]</sc> + <sgl_quote>'"&gt&lt/img&gt\n&lt/div&gt\n\n'</sgl_quote><sc>)</sc>

            <kw>for</kw> txt <kw>in</kw> txt_readers<sc>:</sc>
                _of.write<sc>(</sc><sgl_quote>'&ltdiv <kw>class</kw>="bookmark"&gt'</sgl_quote> + txt<sc>[</sc>0<sc>]</sc>  +  <sgl_quote>'&lt/div&gt'</sgl_quote><sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&ltpre <kw>class</kw>=notes&gt\n"</dbl_quote><sc>)</sc>
                <kw>for</kw> line <kw>in</kw> txt<sc>[</sc>1<sc>:</sc><sc>]</sc><sc>:</sc>
                    line = line.replace<sc>(</sc><dbl_quote>"&lt"</dbl_quote>, <dbl_quote>"&lt"</dbl_quote><sc>)</sc>
                    line = line.replace<sc>(</sc><dbl_quote>"&gt"</dbl_quote>, <dbl_quote>"&gt"</dbl_quote><sc>)</sc>
                    line = line.replace<sc>(</sc><dbl_quote>"101010"</dbl_quote>, <dbl_quote>"&lt"</dbl_quote><sc>)</sc>  <comment Class="py"># until i think of
</comment>                    line = line.replace<sc>(</sc><dbl_quote>"111000"</dbl_quote>, <dbl_quote>"&gt"</dbl_quote><sc>)</sc>  <comment Class="py"># something better...
</comment>                    _of.write<sc>(</sc>line<sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&lt/pre&gt\n"</dbl_quote><sc>)</sc>

            <kw>for</kw> html <kw>in</kw> html_readers<sc>:</sc>
                _of.write<sc>(</sc><sgl_quote>'&ltdiv <kw>class</kw>="bookmark"&gt'</sgl_quote> + html<sc>[</sc>0<sc>]</sc>  +  <sgl_quote>'&lt/div&gt'</sgl_quote><sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&ltpre <kw>class</kw>=html&gt\n"</dbl_quote><sc>)</sc>
                <kw>for</kw> line <kw>in</kw> html<sc>[</sc>1<sc>:</sc><sc>]</sc><sc>:</sc>  
                    r = line.replace<sc>(</sc><dbl_quote>"&lt"</dbl_quote>, <dbl_quote>"&ltkw*^+&lt"</dbl_quote><sc>)</sc>  <comment Class="py">#  *^+ <kw>is</kw> just a token <kw>for</kw> 
</comment>                    r = r.replace<sc>(</sc><dbl_quote>"&gt"</dbl_quote>,<dbl_quote>"&gt&lt/kw&gt"</dbl_quote><sc>)</sc>       
                    r = r.replace<sc>(</sc><dbl_quote>"*^+"</dbl_quote>, <dbl_quote>"&gt"</dbl_quote><sc>)</sc>           <comment Class="py">#  this line to match. Weird, i know...
</comment>                    <kw>if</kw> <dbl_quote>"&ltkw&gt&lt<sc>!</sc>--"</dbl_quote> <kw>in</kw> r<sc>:</sc>
                        r = r.replace<sc>(</sc><dbl_quote>"&ltkw&gt&lt<sc>!</sc>--"</dbl_quote>, <sgl_quote>'&ltcomment <kw>class</kw>="html"&gt&lt<sc>!</sc>--'</sgl_quote><sc>)</sc>
                        r = r.replace<sc>(</sc><dbl_quote>"--&gt&lt/kw&gt"</dbl_quote>, <sgl_quote>'--&gt&lt/comment&gt'</sgl_quote><sc>)</sc>
                    _of.write<sc>(</sc>r<sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&lt/pre&gt\n"</dbl_quote><sc>)</sc>

            <kw>for</kw> css <kw>in</kw> css_readers<sc>:</sc>
                _of.write<sc>(</sc><sgl_quote>'&ltdiv <kw>class</kw>="bookmark"&gt'</sgl_quote> + css<sc>[</sc>0<sc>]</sc>  +  <sgl_quote>'&lt/div&gt'</sgl_quote><sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&ltpre <kw>class</kw>=css&gt\n"</dbl_quote><sc>)</sc>
                <kw>for</kw> line <kw>in</kw> css<sc>[</sc>1<sc>:</sc><sc>]</sc><sc>:</sc>
                    r = line
                    <kw>if</kw> <dbl_quote>"<sc>{</sc>"</dbl_quote> <kw>in</kw> line<sc>:</sc>
                        r = <dbl_quote>"&ltsc&gt"</dbl_quote>
                        r = r + line.replace<sc>(</sc><dbl_quote>"<sc>{</sc>"</dbl_quote>, <dbl_quote>"<sc>{</sc>&lt/sc&gt"</dbl_quote><sc>)</sc>
                    <kw>elif</kw> <dbl_quote>"<sc>}</sc>"</dbl_quote> <kw>in</kw> line<sc>:</sc>
                        r = line.replace<sc>(</sc><dbl_quote>"<sc>}</sc>"</dbl_quote>, <dbl_quote>"&ltsc&gt<sc>}</sc>&lt/sc&gt"</dbl_quote><sc>)</sc>
                    <kw>else</kw><sc>:</sc>
                        r = <dbl_quote>"&ltcss&gt"</dbl_quote> + r<sc>[</sc><sc>:</sc>-1<sc>]</sc> + <dbl_quote>"&lt/css&gt\n"</dbl_quote>

                    <kw>if</kw> <dbl_quote>"/*"</dbl_quote> <kw>in</kw> r<sc>:</sc>
                        r = r.replace<sc>(</sc><sgl_quote>'/*'</sgl_quote>, <sgl_quote>'&ltcomment <kw>class</kw>="css"&gt/*'</sgl_quote><sc>)</sc>
                        r = r.replace<sc>(</sc><sgl_quote>'*/'</sgl_quote>, <sgl_quote>'*/&lt/comment&gt'</sgl_quote><sc>)</sc>

                    _of.write<sc>(</sc>r<sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&lt/pre&gt\n"</dbl_quote><sc>)</sc>

            <kw>for</kw> js <kw>in</kw> js_readers<sc>:</sc>
                dbl_quote = 0
                sgl_quote = 0
                block_comment = 0
                _of.write<sc>(</sc><sgl_quote>'&ltdiv <kw>class</kw>="bookmark"&gt'</sgl_quote> + js<sc>[</sc>0<sc>]</sc>  +  <sgl_quote>'&lt/div&gt'</sgl_quote><sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&ltpre <kw>class</kw>=js&gt\n"</dbl_quote><sc>)</sc>
                <kw>for</kw> line_num, line <kw>in</kw> enumerate<sc>(</sc>js<sc>[</sc>1<sc>:</sc><sc>]</sc><sc>)</sc><sc>:</sc>
                    line = line.replace<sc>(</sc><dbl_quote>"&lt"</dbl_quote>, <dbl_quote>"&lt"</dbl_quote><sc>)</sc>
                    line = line.replace<sc>(</sc><dbl_quote>"&gt"</dbl_quote>, <dbl_quote>"&gt"</dbl_quote><sc>)</sc>

                    <kw>if</kw> <sgl_quote>'/*'</sgl_quote> <kw>in</kw> line<sc>:</sc> 
                        line = line.replace<sc>(</sc><sgl_quote>'/*'</sgl_quote>, <sgl_quote>'&ltcomment Class="js"&gt/*'</sgl_quote><sc>)</sc>
                        block_comment = 1
                    <kw>if</kw> <sgl_quote>'*/'</sgl_quote> <kw>in</kw> line<sc>:</sc>
                        line = line.replace<sc>(</sc><sgl_quote>'*/'</sgl_quote>, <sgl_quote>'*/&lt/comment&gt'</sgl_quote><sc>)</sc>
                        block_comment = 0
                    <kw>if</kw> block_comment == 1<sc>:</sc>
                        _of.write<sc>(</sc>line<sc>)</sc>
                        <kw>continue</kw>

                    <kw>for</kw> word <kw>in</kw> js_reserved<sc>:</sc>
                        start = 0
                        <kw>while</kw> x <sc>:</sc>= findWholeWord<sc>(</sc>word<sc>)</sc><sc>(</sc>line, start<sc>)</sc><sc>:</sc>
                            line = line<sc>[</sc><sc>:</sc>x.start<sc>(</sc><sc>)</sc><sc>]</sc> + <sgl_quote>'&ltkw&gt'</sgl_quote> + word + <sgl_quote>'&lt/kw&gt'</sgl_quote> + line<sc>[</sc>x.end<sc>(</sc><sc>)</sc><sc>:</sc><sc>]</sc>
                            start = x.end<sc>(</sc><sc>)</sc> + len<sc>(</sc><sgl_quote>'&ltkw&gt&lt/kw&gt'</sgl_quote><sc>)</sc>
                    <kw>for</kw> sym <kw>in</kw> special_symbols<sc>:</sc>
                        <kw>if</kw> sym <kw>in</kw> line<sc>:</sc>
                            line = line.replace<sc>(</sc>sym, <dbl_quote>"&ltsc&gt"</dbl_quote> + sym + <dbl_quote>"&lt/sc&gt"</dbl_quote><sc>)</sc>

                    j = 0
                    in_tag = 0 <comment Class="py"># don't put tags inside other tags<sc>!</sc>
</comment>                    temp = list<sc>(</sc>line<sc>)</sc>
                    
                    <kw>while</kw> j &lt len<sc>(</sc>temp<sc>)</sc><sc>:</sc> <comment Class="py">#go through chars of the line
</comment>                        <kw>if</kw> temp<sc>[</sc>j<sc>]</sc> == <sgl_quote>'&lt'</sgl_quote><sc>:</sc>
                            in_tag = 1
                        <kw>if</kw> temp<sc>[</sc>j<sc>]</sc> == <sgl_quote>'&gt'</sgl_quote><sc>:</sc>
                            in_tag = 0
                        <comment Class="py"># it double marks these /* quotes
</comment>                        <kw>if</kw> temp<sc>[</sc>j<sc>]</sc> == <sgl_quote>'/'</sgl_quote> <kw>and</kw> temp<sc>[</sc>j+1<sc>]</sc> == <sgl_quote>'/'</sgl_quote> <kw>and</kw> dbl_quote == 0 <kw>and</kw> sgl_quote ==0<sc>:</sc>
                            temp<sc>[</sc>j<sc>]</sc> = <sgl_quote>'&ltcomment Class="js"&gt/'</sgl_quote>
                            temp.append<sc>(</sc><sgl_quote>'&lt/comment&gt'</sgl_quote><sc>)</sc>
                            <kw>break</kw>
                        <kw>if</kw> temp<sc>[</sc>j<sc>]</sc> == <sgl_quote>'"'</sgl_quote> <kw>and</kw> sgl_quote == 0 <kw>and</kw> in_tag == 0<sc>:</sc>
                            <kw>if</kw> dbl_quote == 0<sc>:</sc>
                                temp.insert<sc>(</sc>j, <sgl_quote>'&ltdbl_quote&gt'</sgl_quote><sc>)</sc>
                                dbl_quote = 1
                            <kw>else</kw><sc>:</sc>
                                temp.insert<sc>(</sc>j + 1, <sgl_quote>'&lt/dbl_quote&gt'</sgl_quote><sc>)</sc>
                                dbl_quote = 0
                            j += 2
                            <kw>continue</kw>
                        <kw>elif</kw> temp<sc>[</sc>j<sc>]</sc> == <dbl_quote>"'</sgl_quote>"</dbl_quote><sc>:</sc>
                            <kw>if</kw> sgl_quote == 0 <kw>and</kw> dbl_quote == 0 <kw>and</kw> in_tag == 0<sc>:</sc>
                                temp.insert<sc>(</sc>j, <sgl_quote>'&ltsgl_quote&gt'</sgl_quote><sc>)</sc>
                                sgl_quote = 1
                            <kw>else</kw><sc>:</sc>
                                temp.insert<sc>(</sc>j + 1, <sgl_quote>'&lt/sgl_quote&gt'</sgl_quote><sc>)</sc>
                                sgl_quote = 0
                            j += 2
                            <kw>continue</kw>
                        j += 1
                    line = <sgl_quote>''</sgl_quote>.join<sc>(</sc>temp<sc>)</sc>

                    _of.write<sc>(</sc>line<sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&lt/pre&gt\n"</dbl_quote><sc>)</sc>


            <comment Class="py">#TODO<sc>:</sc> block quotes <kw>in</kw> python
</comment>            <kw>for</kw> py <kw>in</kw> py_readers<sc>:</sc>
                dbl_quote = 0
                sgl_quote = 0
                _of.write<sc>(</sc><sgl_quote>'&ltdiv <kw>class</kw>="bookmark"&gt'</sgl_quote> + py<sc>[</sc>0<sc>]</sc> + <sgl_quote>'&lt/div&gt'</sgl_quote><sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&ltpre <kw>class</kw>=py&gt\n"</dbl_quote><sc>)</sc>

                <kw>for</kw> line <kw>in</kw> py<sc>[</sc>1<sc>:</sc><sc>]</sc><sc>:</sc>
                    line = line.replace<sc>(</sc><dbl_quote>"&lt"</dbl_quote>, <dbl_quote>"&lt"</dbl_quote><sc>)</sc>
                    line = line.replace<sc>(</sc><dbl_quote>"&gt"</dbl_quote>, <dbl_quote>"&gt"</dbl_quote><sc>)</sc>
                    <kw>for</kw> word <kw>in</kw> py_reserved<sc>:</sc>
                        start = 0
                        <kw>while</kw> x <sc>:</sc>= findWholeWord<sc>(</sc>word<sc>)</sc><sc>(</sc>line, start<sc>)</sc><sc>:</sc>
                            line = line<sc>[</sc><sc>:</sc>x.start<sc>(</sc><sc>)</sc><sc>]</sc> + <sgl_quote>'&ltkw&gt'</sgl_quote> + word + <sgl_quote>'&lt/kw&gt'</sgl_quote> + line<sc>[</sc>x.end<sc>(</sc><sc>)</sc><sc>:</sc><sc>]</sc>
                            start = x.end<sc>(</sc><sc>)</sc> + len<sc>(</sc><sgl_quote>'&ltkw&gt&lt/kw&gt'</sgl_quote><sc>)</sc>
                    <kw>for</kw> sym <kw>in</kw> special_symbols<sc>:</sc>
                        <kw>if</kw> sym <kw>in</kw> line<sc>:</sc>
                            line = line.replace<sc>(</sc>sym, <dbl_quote>"&ltsc&gt"</dbl_quote> + sym + <dbl_quote>"&lt/sc&gt"</dbl_quote><sc>)</sc>
                    j = 0
                    in_tag = 0 <comment Class="py"># don't put tags inside other tags<sc>!</sc>
</comment>                    temp = list<sc>(</sc>line<sc>)</sc>
                    <kw>while</kw> j &lt len<sc>(</sc>temp<sc>)</sc><sc>:</sc>
                        <kw>if</kw> temp<sc>[</sc>j<sc>]</sc> == <sgl_quote>'#'</sgl_quote> <kw>and</kw> dbl_quote == 0 <kw>and</kw> sgl_quote ==0<sc>:</sc>
                            temp<sc>[</sc>j<sc>]</sc> = <sgl_quote>'&ltcomment Class="py"&gt#'</sgl_quote>
                            temp.append<sc>(</sc><sgl_quote>'&lt/comment&gt'</sgl_quote><sc>)</sc>
                            <kw>break</kw>
                        <kw>if</kw> temp<sc>[</sc>j<sc>]</sc> == <sgl_quote>'"'</sgl_quote> <kw>and</kw> sgl_quote == 0<sc>:</sc>
                            <kw>if</kw> dbl_quote == 0<sc>:</sc>
                                temp.insert<sc>(</sc>j, <sgl_quote>'&ltdbl_quote&gt'</sgl_quote><sc>)</sc>
                                dbl_quote = 1
                            <kw>else</kw><sc>:</sc>
                                temp.insert<sc>(</sc>j + 1, <sgl_quote>'&lt/dbl_quote&gt'</sgl_quote><sc>)</sc>
                                dbl_quote = 0
                            j += 2
                            <kw>continue</kw>
                        <kw>elif</kw> temp<sc>[</sc>j<sc>]</sc> == <dbl_quote>"'</sgl_quote>"</dbl_quote><sc>:</sc>
                            <kw>if</kw> sgl_quote == 0 <kw>and</kw> dbl_quote == 0<sc>:</sc>
                                temp.insert<sc>(</sc>j, <sgl_quote>'&ltsgl_quote&gt'</sgl_quote><sc>)</sc>
                                sgl_quote = 1
                            <kw>else</kw><sc>:</sc>
                                temp.insert<sc>(</sc>j + 1, <sgl_quote>'&lt/sgl_quote&gt'</sgl_quote><sc>)</sc>
                                sgl_quote = 0
                            j += 2
                            <kw>continue</kw>
                        j += 1
                    line = <sgl_quote>''</sgl_quote>.join<sc>(</sc>temp<sc>)</sc>
                    _of.write<sc>(</sc>line<sc>)</sc>
                _of.write<sc>(</sc><dbl_quote>"&lt/pre&gt\n"</dbl_quote><sc>)</sc>

            _of.write<sc>(</sc><dbl_quote>"&lt/body&gt"</dbl_quote><sc>)</sc>
            _of.write<sc>(</sc><dbl_quote>"&lt/html&gt"</dbl_quote><sc>)</sc>
</pre>
</body></html>